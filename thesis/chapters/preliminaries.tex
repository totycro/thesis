\section{Preliminaries}
\todo[inline]{this section contains all the required notation but will just be written up nicely in the final version}

\todo[inline]{formulas}

The language of a first-order formula $A$ is denoted by $\Lang(A)$ and contains all predicate, constant and function symbols that occur in $A$.
For formulas $A_1, \ldots, A_n$, $\Lang(A_1, \ldots, A_n) = \bigcup_{1\varleq i \varleq n} \Lang(A_i)$.
These are also referred to as the \emph{\mbox{non-logical} symbols} of $A$.
The \emph{logical symbols} on the other hand include all logical connectives, quantifiers, the equality symbol ($=$) as well as symbols denoting truth ($\top$) and falsity ($\bot$).
Among the usual symbols for the connectives $\land$ (conjunction), $\lor$ (disjunction), $\limpl$ (implication), we use $\semiff$ to indicate logical equivalence and $\liff$ for the syntactic implication in both direction.
Syntactic equality is denoted by $\syneq$.

For a set of formulas $\Phi$, $\lnot \Phi$ denotes $\{\lnot A \mid A \in \Phi\}$.

\todo[inline]{terms}

A term $s$ is a subterm of a term $t$ if $s$ occurs in $t$. $s$ is a strict subterm of $t$ if $s$ is a subterm of $t$ and $s \neq t$. The superterm relation is the inverse of the subterm relation.

An occurrence of $\Phi$-term is called \emph{maximal} if it does not occur as subterm of another $\Phi$-term.
An occurrence of a colored term $t$ is a maximal colored term if it does not occur as subterm of another colored term.
\todo{colors are only defined later}


We denote $x_1, \ldots, x_n$ by $\bar x$.

\todo[inline]{substitutions}

TODO: define infinite-domain unifiers

TODO: define range and domain of substitutions


A substitution is a mapping of finitely many variables to terms.
We define named substitutions $\sigma$ of a variable $x$ by a term $t$ in a set notation $\sigma = \{ x \mapsto t\}$ such that 
$\varphi\sigma$ denotes a formula or term $\varphi$ where each occurrence of the variable $x$ is replaced by the term $t$.
Unnamed substitution applications are written as $\varphi\subst{x/t}$.
A substitution $\sigma$ is called trivial on $x$ if $x\sigma = x$. Otherwise it is called non-trivial.

% the word abstraction has a different meaning already, and this usage is not used except for once
%An \defiemph{abstraction} on the other hand is a mapping of terms to variables. It is denoted by $\varphi\abstractionOp{t/x}$, where $\varphi$ is a formula or term where each occurrence of the term $t$ is replaced by the variable $x$.

A term $s$ is an \defiemph{instance} of a term $t$ if there exists a substitution $\sigma$ such that $t\sigma = s$.
If $s$ is an instance of $t$, then $t$ is an \defiemph{abstraction} of $s$. Note that the abstraction- and instance-relation are reflexive. 
$s$ is a \defiemph{proper} instance (abstraction) of $t$ if $s$ is an instance (abstraction) of $t$ and $s\neq t$.

\todo[inline]{misc}

The length of a term or formula $\varphi$ is the number of logical and non-logical symbols in $\varphi$.

For formulas or terms $\varphi$, $\varphi\occurat{s}{p}$ denotes $\varphi$ with an occurrence of $s$ at position $p$.
$\varphi\occur{s}$ denotes $\varphi$ where the term $s$ occurs on some set of positions $\Phi$. $\varphi\occur{t}$ denotes $\varphi\occur{s}$ where on each position in $\Phi$, $s$ has been replaced by $t$. Due to its vagueness, this notation is mostly used in order to emphasis that the term $s$ does occur in $\varphi$ in some way.

TODO: define $\Sigma$ as subformula set; possibly remove definition in chapter 2

TODO: model has a domain and interpretation as in proof of prop 3.8

TODO: $E^M$ as in prop 3.8

For formulas $\varphi$ with free variables $\bar x$ and models $M$, $M\entails \varphi$ in general denotes $M \entails \forall x_1 \quantifierdots \forall x_n \varphi$.
In instances where an explicit assignment to the free variables $\alpha$ is desired,
we write $M_\alpha \entails \varphi$ 
to signify that $M$ entails the formula $\varphi$ where the free variable assignment concurs with $\alpha$ and the free variables not assigned by $\alpha$ are universally quantified.

TODO: define prenex formulas with matrix and prefix

TODO: define prefix of term position: e.g. u in f(c, g(u, x, h(a))) has the prefix f(., g(., ., .)), or possible written as sequence of symbols (algo: always go to parent starting at u)

TODO: free vars: $\FV$ and possibly $\LV$: free lifting vars. probably $\FV$ does not include $\LV$. ($\LV$ only if it is really going to be used)


\subsection{Unification}

We specify the unification algorithm which is used in this thesis in order enable formal reasoning.

\begin{defi}[Unification algorithm]
	Let $\id$ denote the identity function and $\textbf{fail}$ be returned by $\mgu$ in case the arguments are not unifiable to signify that the $\mgu$ of the given arguments is not defined. We treat constants as $0$-ary functions.
	Let $s$ and $t$ denote terms and $x$ a variable.

	The most general unifier $\mgu$ of two literals $l = A(s_1,\dotsc, s_n)$ and $l' = A(t_1,\dots, t_n)$ is defined to be $\mgu(\{ (s_1, t_1), \dotsc, (s_n, t_n)\})$.


	The $\mgu$ for a set of pairs of terms $T$ is defined as follows:

	$
	\mgu(\emptyset) = \id
	$

	\newcommand{\aatahfdgasdfg}{.4\textwidth}
	$
	\mbox{$\mgu(\{t\} \cup T)$} =
	%\mgu(\{t\} \cup T) =$
	\begin{cases}
		\mathbf{fail} 				& \parbox[t]{\aatahfdgasdfg}{if $t = (x, s)$ or $t=(s,x)$ and $x$ occurs in $s$ but $x\neq s$ } \\
		\mgu(T\subst{x/s})\subst{x/s} \cup \{x\mapsto s\} 		& \parbox[t]{\aatahfdgasdfg}{if $t = (x, s)$ or $t=(s,x)$ and $x$ does not occur in $s$ or $x=x$} \\
		\mathbf{fail} 				& \parbox[t]{\aatahfdgasdfg}{if $t = (f(s_1,\dotsc,s_n), g(s_1,\dotsc,s_n))$ with $f\neq g$} \\
		\mgu(T \cup \{(s_1, t_1), \dotsc, (t_n, s_n)\})		& \parbox[t]{\aatahfdgasdfg}{if $t = (f(s_1,\dotsc,s_n), f(t_1,\dotsc,t_n))$} \\
		\mgu(T) 							& \text{if $t=(s, s)$} \\
	\end{cases}
	$

	For $\sigma = \mgu(l, l')$ for two literals $l$ and $l'$ we denote by $\sigma_i$ the $i$th substitution, which in the course of the run of the algorithm has been added to $\sigma$. 
	We denote composition of substitutions $\sigma_i$ up to including $\sigma_j$ by $\sigmarange{i}{j}$.
	\qedhere
\end{defi}

Hence for a unifier $\sigma$, we have that $ \sigma = \sigma_1\cdots\sigma_n = \sigmarange{i}{j}$, where $n$ is $|\dom(\sigma)|$.
Note that $|\dom(\sigma_i)| = 1$ for $1\varleq i \varleq n$.





