\section{Preliminaries}
\todo[inline]{this section contains all the required notation but will just be written up nicely at the end}

The language of a first-order formula $A$ is denoted by $\Lang(A)$ and contains all predicate, constant and function symbols that occur in $A$.
These are also referred to as the \emph{\mbox{non-logical} symbols} of $A$.
The \emph{logical symbols} on the other hand include all logical connectives, quantifiers, the equality symbol ($=$) as well as symbols denoting truth ($\top$) and falsity ($\bot$).

For formulas $A_1, \ldots, A_n$, $\Lang(A_1, \ldots, A_n) = \bigcup_{1\leq i \leq n} \Lang(A_i)$.

A term $s$ is a subterm of a term $t$ if $s$ occurs in $t$. $s$ is a strict subterm of $t$ if $s$ is a subterm of $t$ and $s \neq t$.

An occurrence of $\Phi$-term is called \emph{maximal} if it does not occur as subterm of another $\Phi$-term.
An occurrence of a colored term $t$ is a maximal colored term if it does not occur as subterm of another colored term.
\todo{colors are only defined later}

We denote $x_1, \ldots, x_n$ by $\bar x$.

For a set of formulas $\Phi$, $\lnot \Phi$ denotes $\{\lnot A \mid A \in \Phi\}$.

A substitution is a mapping of variables to terms. It is denoted by $\phi\subst{x/t}$, where $\phi$ is a formula or term where each occurrence of the variable $x$ is replaced by the term $t$.
A substitution $\sigma$ is called trivial on $x$ if $x\sigma = x$. Otherwise it is called non-trivial.

An abstraction on the other hand is a mapping of terms to variables. It is denoted by $\phi\abstraction{t/x}$, where $\phi$ is a formula or term where each occurrence of the term $t$ is replaced by the variable $x$.

The length of a term $t$ is the number of symbols in $t$.

$A\occurat{s}{p}$ denotes $A$ with an occurrence of $s$ at position $p$.

TODO: define $A\occur{s}$.

TODO: define $\Sigma$ as subformula set; possibly remove definition in chapter 2

\section{Craig Interpolation}

\todo[inline]{TODO: write some text about what interpolation means and that we prove more or less only reverse interpolation, but that's fine by the proposition }

\begin{defi}
	\label{def:interpolant}
	Let $\Gamma$ and $\Delta$ be sets of first-order formulas.
	An \defiemph{interpolant} of $\Gamma$ and $\Delta$ is a first-order formula $I$ such that 
	\begin{enumerate}
		\item $ \Gamma \entails I$ \label{int_1}
		\item $ I \entails \Delta $  \label{int_2}
		\item $ \Lang(I) \subseteq \Lang(\Gamma) \intersect \Lang(\Delta)$.  \label{int_3}
	\end{enumerate}

	\begin{samepage}
		A \defiemph{reverse interpolant} of $\Gamma$ and $\Delta$ is a first-order formula $I$ such that $I$ meets conditions \ref{int_1} and \ref{int_3} of an interpolant as well as:
		\begin{enumerate}[\quad\:1'.]
				\setcounter{enumi}{1}
			\item $ \Delta \entails \lnot I $  \label{int_2prime}
				\qedhere
		\end{enumerate}
	\end{samepage}
\end{defi}

\begin{thm}[Interpolation]
	\label{thm:interpolation_original}
	Let $\Gamma$ and $\Delta$ be sets of first-order formulas such that $ \Gamma \entails \Delta $.
	Then there exists an interpolant for $\Gamma$ and $\Delta$.
\end{thm}

\begin{thm}[Reverse Interpolation]
	\label{thm:interpolation}
	Let $\Gamma$ and $\Delta$ be sets of first-order formulas such that $ \Gamma \cup \Delta $ is unsatisfiable.
	Then there exists a reverse interpolant for $\Gamma$ and $\Delta$.
\end{thm}


\begin{prop}
	Theorem \ref{thm:interpolation_original} and \ref{thm:interpolation} are equivalent.
	\label{prop:interpolations_equivalent}
\end{prop}
\begin{proof}
	Let $\Gamma$ and $\Delta$ be sets of first-order formulas such that $ \Gamma \entails \Delta$.
	Then $\Gamma \cup \lnot \Delta$ is unsatisfiable.
	By Theorem \ref{thm:interpolation}, there exists a reverse interpolant $I$ for $\Gamma$ and $\lnot \Delta$.
	As $\lnot \Delta \entails \lnot I$, we get by contraposition that $I \entails \Delta$, hence $I$ is an interpolant for $\Gamma$ and $\Delta$

	For the other direction,
	let $\Gamma$ and $\Delta$ be sets of first-order formulas such that $ \Gamma \cup \Delta$ is unsatisfiable.
	Then $\Gamma \entails \lnot \Delta$, hence by Theorem \ref{thm:interpolation_original}, there exists an interpolant $I$ of $\Gamma$ and $\lnot \Delta$.
	But as thus $ I\entails \lnot \Delta$, we get by contraposition that $\Delta \entails \lnot I$, so $I$ is a reverse interpolant for $\Gamma$ and $\Delta$.
\end{proof}

As the notions of interpolation and reverse interpolation in this sense coincide, we will in the following only speak of interpolation where  will be clear from the context which definition applies.

\begin{lemma}
	\label{lemma:logically_equivalent_sets}
	Let $\Gamma, \Gamma', \Delta, \Delta'$ be sets of first order formulas such that $\Gamma \semiff \Gamma'$ and $\Delta \semiff \Delta'$.
	Then $I$ is an interpolant for $\Gamma$ and $\Delta$ if and only if $I$ is an interpolant for $\Gamma'$ and $\Delta'$.
\end{lemma}
\begin{proof}
	TODO
\end{proof}

In the context of interpolation, every non-logical symbol is assigned a color which indicates its origin(s). 
\begin{defi}[Coloring]
A non-logical symbol is said to be \emph{$\Gamma$ ($\Delta$)-colored} if it only occurs in $\Gamma$ ($\Delta$) and \emph{grey} in case it occurs in both $\Gamma$ and $\Delta$. A symbol is \emph{colored} if it is $\Gamma$- or $\Delta$-colored.
\end{defi}
