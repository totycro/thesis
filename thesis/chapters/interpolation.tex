


\section{Craig Interpolation}

\todo[inline]{TODO: write some text about what interpolation means and that we prove more or less only reverse interpolation, but that's fine by the proposition }

\begin{defi}
	\label{def:interpolant}
	Let $\Gamma$ and $\Delta$ be sets of first-order formulas.
	An \defiemph{interpolant} of $\Gamma$ and $\Delta$ is a first-order formula $I$ such that 
	\begin{enumerate}
		\item $ \Gamma \entails I$ \label{int_1}
		\item $ I \entails \Delta $  \label{int_2}
		\item $ \Lang(I) \subseteq \Lang(\Gamma) \intersect \Lang(\Delta)$.  \label{int_3}
	\end{enumerate}

	\begin{samepage}
		A \defiemph{reverse interpolant} of $\Gamma$ and $\Delta$ is a first-order formula $I$ such that $I$ meets conditions \ref{int_1} and \ref{int_3} of an interpolant as well as:
		\begin{enumerate}[\quad\:1'.]
				\setcounter{enumi}{1}
			\item $ \Delta \entails \lnot I $  \label{int_2prime}
				\qedhere
		\end{enumerate}
	\end{samepage}
\end{defi}

%\begin{thm}[Interpolation]
\begin{restatable}[Interpolation]{thm}{interpolationThm}
	\label{thm:interpolation_original}
	Let $\Gamma$ and $\Delta$ be sets of first-order formulas such that $ \Gamma \entails \Delta $.
	Then there exists an interpolant for $\Gamma$ and $\Delta$.
%\end{thm}
\end{restatable}
%
%\begin{thm}[Reverse Interpolation]
\begin{restatable}[Reverse Interpolation]{thm}{interpolationRevThm}
		\label{thm:interpolation}
		Let $\Gamma$ and $\Delta$ be sets of first-order formulas such that $ \Gamma \cup \Delta $ is unsatisfiable.
		Then there exists a reverse interpolant for $\Gamma$ and\nolinebreak{} $\Delta$.
\end{restatable}



\begin{prop}
	Theorem \ref{thm:interpolation_original} and \ref{thm:interpolation} are equivalent.
	\label{prop:interpolations_equivalent}
\end{prop}
\begin{proof}
	Let $\Gamma$ and $\Delta$ be sets of first-order formulas such that $ \Gamma \entails \Delta$.
	Then $\Gamma \cup \lnot \Delta$ is unsatisfiable.
	By Theorem \ref{thm:interpolation}, there exists a reverse interpolant $I$ for $\Gamma$ and $\lnot \Delta$.
	As $\lnot \Delta \entails \lnot I$, we get by contraposition that $I \entails \Delta$, hence $I$ is an interpolant for $\Gamma$ and $\Delta$

	For the other direction,
	let $\Gamma$ and $\Delta$ be sets of first-order formulas such that $ \Gamma \cup \Delta$ is unsatisfiable.
	Then $\Gamma \entails \lnot \Delta$, hence by Theorem \ref{thm:interpolation_original}, there exists an interpolant $I$ of $\Gamma$ and $\lnot \Delta$.
	But as thus $ I\entails \lnot \Delta$, we get by contraposition that $\Delta \entails \lnot I$, so $I$ is a reverse interpolant for $\Gamma$ and $\Delta$.
\end{proof}

As the notions of interpolation and reverse interpolation in this sense coincide, we will in the following only speak of interpolation where  will be clear from the context which definition applies.

\begin{lemma}
	\label{lemma:logically_equivalent_sets}
	Let $\Gamma, \Gamma', \Delta, \Delta'$ be sets of first-order formulas such that $\Gamma \semiff \Gamma'$ and $\Delta \semiff \Delta'$ and $\Lang(\Gamma) \cap \Lang(\Delta) = \Lang(\Gamma') \cap \Lang(\Delta')$.
	Then $I$ is an interpolant for $\Gamma$ and $\Delta$ if and only if $I$ is an interpolant for $\Gamma'$ and $\Delta'$.
\end{lemma}
\begin{proof}
	Clearly $\Gamma \entails I$ holds if and only if $\Gamma' \entails I$ and similarly
	$\Delta \entails \lnot I$ holds if and only if $\Delta' \entails \lnot I$.
	As the intersections of the respective languages coincide, the language condition on $I$ is satisfied in both directions.
\end{proof}

\begin{remark}
	In Lemma \ref{lemma:logically_equivalent_sets}, it is not sufficient to require that $\Gamma \semiff \Gamma'$ and $\Delta \semiff \Delta'$. 
	Consider the example where
	$\Gamma = \{ \forall x (x=c)\}$ and $\Delta = \lnot \Gamma$
	as well as  
	$\Gamma' = \{ \forall x (x=d)\}$ and $\Delta' = \lnot \Gamma'$.
	Then even though $\Gamma$ and $\Gamma'$ as well as $\Delta$ and $\Delta'$ have the same models,
	$\Lang(\Gamma) \cap \Lang(\Delta) = \{c\}$
	whereas
	$\Lang(\Gamma') \cap \Lang(\Delta') = \{d\}$.
	Therefore $\forall x (x=c)$ is an interpolant for $\Gamma$ and $\Delta$ but not for $\Gamma'$ and $\Delta'$.
\end{remark}

In the context of interpolation, every non-logical symbol is assigned a color which indicates its origin(s). 
\begin{defi}[Coloring]
	\label{def:coloring}
A non-logical symbol is said to be \defiemph{$\Gamma$ ($\Delta$)-colored} if it only occurs in $\Gamma$ ($\Delta$) and \defiemph{grey} in case it occurs in both $\Gamma$ and $\Delta$. A symbol is \defiemph{colored} if it is $\Gamma$- or $\Delta$-colored.
A term is a \defiemph{$\Phi$-term} if its outermost symbol is $\Phi$-colored.

A term $t$ is \defiemph{single-colored} if $t$ is $\Phi$-colored for some $\Phi$ and all colored symbols in $t$ are $\Phi$-colored.
A term $t$ is \defiemph{multi-colored} if $t$ is $\Phi$-colored for some $\Phi$ and $t$ contains a term which is colored but not $\Phi$-colored.\todo{check if multi-colored is even used}{}
Note that a multi-colored $\Phi$-term consequently is a term whose outermost symbol is $\Phi$-colored and contains a colored but not $\Phi$-colored subterm.

An occurrence of $\Phi$-term is called \emph{maximal} if it does not occur as subterm of another $\Phi$-term.
An occurrence of a colored term $t$ is a maximal colored term if it does not occur as subterm of another colored term.

  An occurrence of a term $t$ is called \defiemph{$\Phi$-colored} if $t$ is contained in a maximal $\Phi$-colored term.
	$t$ is called \defiemph{colored} if $t$ is of any color and \defiemph{grey} otherwise.\mytodo{probably remove this}

	A variable is a \defiemph{color-changing} variable if it occurs both in a single-colored $\Phi$-term and a single-colored $\Psi$-term in a given context.\mytodo{probably remove color-changing}
\end{defi}

We sometimes use $\Phi$ and $\Psi$ as colors to emphasise that the reasoning at hand is valid irrespective of the actual color assignment and solely assuming that $\Phi \neq \Psi$. 
%both if $\Phi = \Gamma$ and $\Psi = \Delta  $ as well as if $\Phi = \Delta$ and $\Psi = \Delta$.


\subsection{Degenerate cases}
In this thesis, the equality symbol as well as the symbols for truth and falsity are regarded as a logical symbol. 
This is justified by the following examples, which are referred to in \cite[Example 20.2 and 20.4]{boolos2007computability} as ``failure of interpolation'' and ``degenerate cases'' respectively:

\begin{exa}
	Let $\Gamma = \{ a=b \} $ and $\Delta = \{P(a), \lnot P(b)\}$.
	Note that here, the intersection of $\Lang(\Gamma)$ and $\Lang(\Delta)$ does not contain a predicate symbol.
	By regarding $=$ as logical symbol and therefore permitting it to occur in an interpolant despite the fact that it does not occur in $\Delta$ allows for the interpolant $a=b$.
	If we would not permit $=$ in the interpolant, there would be no interpolant for $\Gamma$ and $\Delta$, even though $\Gamma \cup \Delta$ clearly is unsatisfiable.
\end{exa}

\begin{exa}
	Let $\Gamma = \{ P(a) \land \lnot P(a) \} $ and $\Delta = \emptyset$.
	As clearly the intersection of $\Lang(\Gamma)$ and $\Lang(\Delta)$ is empty, we may form an interpolant only of logical symbols.
	In this instance, the interpolant must be either $\bot$ or a formula logically equivalent to $\bot$.
	By merely swapping $\Gamma$ and $\Delta$, we arrive at a situation where the interpolant must be equivalent to $\top$.

	Note that as we can express a formulas, which are logically equivalent to $\bot$ and $\top$ respectively by employing the equality symbol\footnote{$\forall x\,x\neq x$ and $\forall x\,x=x$ are suitable examples for $\bot$ and $\top$ respectively.}, the symbols for truth and falsity are not strictly required to be regarded as logical symbols for the interpolation theorem to hold.
\end{exa}


\section{Beth's definability theorem}
\label{sec:beth}

In this section, we illustrate the interpolation theorem by presenting Beth's definability theorem, which admits a straightforward proof by means of the interpolation theorem. 
The definability theorem deals with definitions of predicates by means of formulas and bridges the gap between implicit definitions, where predicates are defined by its use, and explicit definitions, which define a formula by means of another formula, by even showing their equivalence.
This is given significance by the circumstance that implicit definitions occur in mathematics, but are by this theorem in no sense weaker than explicit defintions.

Its original publication in \cite{beth1953} precedes Craig's papers on interpolation (\cite{Craig57linear,Craig57three}) by four years and hence relies on a direct proof.
 

\begin{defi}[Implicit and explicit definition]
	Let $\LangSym$ be a first-order language and
	$P$ and $P'$ be two fresh predicate symbols of arity $n$.
	Let $\Gamma_P$ be a set of first-order formulas\todo{open or closed?}{}
	in the language $\LangSym\cup\{P\}$ 
	and $\Gamma_{P'}$ the same set of formulas with every occurrence of $P$ in $\Gamma_P$ replaced by\nolinebreak{} $P'$, such that the language of $\Gamma_{P'}$ is $\LangSym \cup\{P'\}$.

	$\Gamma_P$ defines $P$ implicitly iff
	\[\Gamma_P \cup \Gamma_{P'} \entails \forall x_1\quantifierdots \forall x_n \left(  P(x_1, \dots, x_n) \liff P'(x_1, \dots, x_n)\right).\]
	On the other hand $\Gamma_P$ defined $P$ explicitly iff there is formula $\varphi$ in $\LangSym$ with $\FV(\varphi) = \{x_1, \dots, x_n\}$ such that 
	\[\Gamma_P\entails \forall x_1\quantifierdots \forall x_n \left(  P(x_1, \dots, x_n) \liff \varphi\right).\qedhere\]
\end{defi}

Note that the definition of implicit definitions is essentially second-order 
and 
can be expressed by the second-order sentence
%\[ \forall P\,\forall P' \left(  \left(\bigwedge_{\varphi \in \Gamma^*_P \cup \Gamma^*_{P'}} \varphi \right) \limpl P=P'\right),\] 
\begin{samepage}
\[ \forall P\,\forall P' \left(  \left(\Gamma^*_P \land \Gamma^*_{P'} \right) \limpl P=P'\right),\] 
where $\Gamma^*_P$ and $\Gamma^*_{P'}$ are conjunctions of the formulas of 
respective reductions of $\Gamma_P$ and $\Gamma_{P'}$ 
to finite sets, which exist by the compactness theorem.
%by reducing $\Gamma_P$ and $\Gamma_{P'}$ to finite sets $\Gamma^*_P$ and $\Gamma^*_{P'}$ by a suitable application of the compactness theorem
% cite chang/keisler page 324
\end{samepage}

\begin{thm}[Beth's definability theorem]
	$\Gamma_P$ defines $P$ explicitly if and only if $\Gamma_P$ defines $P$ implicitly.
\end{thm}
\begin{proof}
	Suppose that $\Gamma_P$ defines $P$ explicitly. 
	Then there exists some formula $\varphi$ such that 
	$\Gamma_P\entails \forall x_1\quantifierdots \forall x_n (  P(x_1, \dots, x_n) \liff \varphi)$.
	But then it also holds that 
	$\Gamma_{P'}\entails \forall x_1\quantifierdots \forall x_n (  P'(x_1, \dots, x_n) \liff \varphi)$, hence
	$\Gamma_{P} \cup \Gamma_{P'} \entails \forall x_1\quantifierdots \forall x_n (P(x_1, \dots, x_n) \liff P'(x_1, \dots, x_n))$.
	Therefore $\Gamma_P$ is an implicit definition of $P$.

	For the other direction, suppose that $\Gamma_P$ defines $P$ implicitly. 
	Then
	$\Gamma_P \cup \Gamma_{P'} \entails\allowbreak \forall x_1\quantifierdots \forall x_n (  P(x_1, \dots, x_n) \liff P'(x_1, \dots, x_n))$.
	It follows from the compactness theorem that
	we can find a conjunction $\Gamma^*_{P'}$ of formulas of a finite subset of $\Gamma_{P'}$ such that  
	$\Gamma_P \cup \{\Gamma^*_{P'}\} \entails \forall x_1\quantifierdots \forall x_n (  P(x_1, \dots, x_n) \liff P'(x_1, \dots, x_n))$.
	%Let $\gamma_{P'}$ be the conjunction of all formulas in $\Gamma^*_{P'}$ and 
	Let $y_1, \dots, y_n$ be fresh variables.
	Then we obtain by the deduction theorem that  
	$\Gamma_P \cup \{P(y_1, \dots, y_n)\} \entails \Gamma^*_{P'} \limpl  P'(y_1, \dots, y_n)$.

	Note that $P$ only occurs in the antecedent and $P'$ only occurs in the consequent.
	Hence we can apply the Interpolation Theorem~\ref{thm:interpolation_original} in order to obtain a formula $\chi$
	such that
	$\Gamma_P \cup \{P(y_1, \dots, y_n)\} \entails \chi$ and
	$\chi \entails \Gamma^*_{P'} \limpl  P'(y_1, \dots, y_n)$,
	while additionally $\Lang(\chi) = \Lang(\Gamma_P) \cap \Lang(\Gamma_{P'})$. This implies that neither $P$ nor $P'$ occur in\nolinebreak{} $\chi$.

	Now we apply the deduction theorem another time and get that
	\markA{} $\Gamma_P \entails P(y_1, \dots, y_n) \limpl \chi$ and
	$\Gamma^*_{P'} \entails \chi \limpl  P'(y_1, \dots, y_n)$.
	As $\Gamma^*_{P'}$ implies $\Gamma_{P'}$, we also have that
	$\Gamma_{P'} \entails \chi \limpl  P'(y_1, \dots, y_n)$.
	Since $P$ does not occur in this entailment, it remains valid if we replace every occurrence of the symbol $P'$ by $P$
	and obtain that
	\markB{} $\Gamma_{P} \entails \chi \limpl  P(y_1, \dots, y_n)$.

	But then \markA{} and \markB{} imply that 
	$\Gamma_{P} \entails \chi \liff  P(y_1, \dots, y_n)$, which is equivalent to
	$\Gamma_{P} \entails \forall y_1\quantifierdots\forall y_n \left( \chi \liff  P(y_1, \dots, y_n)\right)$.
	So clearly $\Gamma_P$ defines $P$ explicitly.
\end{proof}



