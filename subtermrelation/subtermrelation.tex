\documentclass[,%fontsize=11pt,%
	%landscape,
	%DIV8, % mehr text pro seite als defaultyyp
	%DIV10,
	%DIV=calc,%
	draft=false,% final|draft % draft ist platzsparender (kein code, bilder..)
	%titlepage,
	numbers=noendperiod
	11pt,
	a4paper,
	oneside,% apparently, this should stay below some other parameter to have an effect
	openany,
	%]{scrartcl}
]{memoir}



\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}


%\usepackage[urw-garamond]{mathdesign}

\usepackage{lscape}
\usepackage{stackengine}
\usepackage{enumerate}
\usepackage{paralist}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,backgrounds,graphs,%
	matrix,patterns,arrows,decorations.pathmorphing,decorations.pathreplacing,%
	positioning,fit,calc,decorations.text,shadows%
}


\input{../latex_header.tex}


% subsections also in toc
\setcounter{tocdepth}{2}
\setsecnumdepth{subsection}


\definethms

\def\proofSkipAmount{ \vskip -0.1em }


%\usepackage{bussproof}

%\usepackage{vaucanson-g}
%\usepackage{amssymb}
\usepackage{latexsym}

% for color-highlighted code
%\usepackage{color} % for grey comments
%\usepackage{alltt}

%\usepackage[doublespacing]{setspace}
%\usepackage[onehalfspacing]{setspace}
%\usepackage[singlespacing]{setspace}


\usepackage{amsthm}


\chapterstyle{madsen}

% define page numbering styles
\makepagestyle{numberCorner}
\makeevenfoot{numberCorner}{\thepage}{}{}
\makeoddfoot{numberCorner}{}{}{\thepage}

\makepagestyle{numberCenter}
%\makeevenfoot{numberCenter}{}{\thepage}{}
%\makeoddfoot{numberCenter}{}{\thepage}{}
%
%\makeevenhead{numberCenter}{\thechapter}{}{\thesection}
%\makeoddhead{numberCenter}{\thesection }{}{\thechapter}
\makeheadrule{numberCenter}{\textwidth}{1pt}

\makeevenhead{numberCenter}{\thepage}{}{\leftmark}
\makeoddhead{numberCenter}{\rightmark}{}{\thepage}


\makeatletter
\makepsmarks{numberCenter}{
	\def\chaptermark##1{\markboth{%
			\ifnum \value{secnumdepth} > -1
			\if@mainmatter
			\chaptername\ \thechapter\ --- %
			\fi
			\fi
	##1}{}}
	\def\sectionmark##1{\markright{%
			\ifnum \value{secnumdepth} > 0
			\thesection. \ %
			\fi
	##1}}
}
\makeatother
\newcommand{\mysetpagestyle}{
	%\pagestyle{numberCorner}
	\pagestyle{numberCenter}
}
\mysetpagestyle





\usepackage{refcheck}

%\settypeblocksize{0.65\stockheight}{0.65\stockwidth}{*}
%\setlrmargins{*}{*}{1.2}
%\setulmargins{*}{*}{1.4}
%\checkandfixthelayout[nearest]


\begin{document}

\tableofcontents

\clearpage

\begin{defi}[$\tau(\inference)$, deprecated version]
	For an inference $\inference$ with $\sigma = \mgu(\inference)$, we define the infinite substitution $\tau(\inference)$ with $\dom(\tau(\inference)) = \{z_s \mid s\sigma \neq s\}$ as follows for a variable $x$:

	\[
		x\tau(\inference) =
		\begin{cases}
			x & \text{$x$ is a non-lifting variable} \\
			z_t & \text{$x$ is a lifting variable $z_s$ and $s\sigma = t$}
		\end{cases}
	\]
\end{defi}

\begin{defi}[$\tau(\inference)$, current version]
	For an inference $\inference$ with $\sigma = \mgu(\inference)$, we define the infinite substitution $\tau(\inference)$ with $\dom(\tau(\inference)) = \dom(\sigma) \cup \{z_s \mid s\sigma \neq s\}$ as follows for a variable $x$:

	\[
		x\tau(\inference) =
		\begin{cases}
			x\sigma & \text{$x$ is a non-lifting variable} \\
			z_t & \text{$x$ is a lifting variable $z_s$ and $s\sigma = t$}
		\end{cases}
	\]
\end{defi}


\begin{defi}[Incremental lifting]
	Let $\pi$ be a resolution refutation of $\Gamma \cup \Delta$.

	For a clause $C$ in $\pi$, 
	we define $\PIinc(C)$ and $\lifiboth{C}$ as follows:
	~

	\begin{itemize}
		\item[Base case.]
			If $C \in \Gamma$, $\PIinc(C) \defeq \bot$.
			If otherwise $C \in \Delta$, $\PIinc(C) \defeq \top$.

			In any case, $\lifiboth{C} \defeq \lifboth{C}$.
		\item[Resolution.]

			If the clause $C$ is the result of a resolution step $\inference$ of $C_1: D \lor l$ and $C_2: E \lor \lnot l'$ using a unifier $\sigma$ such that $l\sigma =  l'\sigma$, then let $\tau = \tau(\inference)$ and define $\PIinc(C)$ and $\lifiboth{C}$ as follows:

			$\lifiboth{C} \defeq \lifboth{(\lifiboth{C_1} \setminus \{l\fromclause\})\tau} \spam\lor \lifboth{(\lifiboth{C_2}\setminus \{l\fromclause'\})\tau} $
			\todo[inline]{say something about $l\fromclause$ and/or rewrite that (also below)}

			\begin{enumerate}

				\item If $l$ is $\Gamma$-colored:
					$\PIinc(C) \defeq \lifboth{\PIinc(C_1)\tau}\spas\lor \lifboth{\PIinc(C_2)\tau} $

				\item If $l$ is $\Delta$-colored:
					$\PIinc(C) \defeq \lifboth{\PIinc(C_1)\tau}\spas\land \lifboth{\PIinc(C_2)\tau} $

				\item If $l$ is grey:
					$\PIinc(C) \defeq
					(\lnot {\lifboth{l'\fromclause\tau}} \land \lifboth{\PIinc(C_1)\tau}) \spam\lor
					(\lifboth{l\fromclause\tau}\land \lifboth{\PIinc(C_2)\tau })
					$

			\end{enumerate}

		\item[Factorisation.]
			If the clause $C$ is the result of a factorisation step $\inference$ of $C_1: l \lor l' \lor D$ using a unifier $\sigma$ such that $l\sigma = l'\sigma$, then $\PIinc(C) \defeq \lifboth{\PIinc(C_1)\tau(\inference)}$ and $\lifiboth{C} \defeq \lifboth{ (\lifiboth{C_1} \setminus\nolinebreak \{l'\cl\})\tau(\inference)}$.
			\qedhere

	\end{itemize}

\end{defi}


\begin{defi}[Quantifier block]
	\label{def:arrow_quantifier_block}
	Let $C$ be a clause in a resolution refutation $\pi$ of $\Gamma\cup\Delta$
	and $\bar x$ be the $\Delta$-lifting variables and $\bar y$ the $\Gamma$-lifting variables occurring in $\PIinc(C)$ and $\lifiboth(C)$.
	$\Q(C)$ denotes an arrangement of the elements of  $\{ \forall x_t \mid x_t \in \bar x\} \cup \{ \exists y_t \mid y_t \in \bar y\}$ such that for two lifting variable $z_s$ and $z_r$, if $s$ is a subterm of $r$, then $z_s$ is listed before $z_r$.
	We denote $\Q(\square)$ by $\Q(\pi)$.
\end{defi}

\begin{clemma}
	For a clause $C$ of a resolution refutation of $\Gamma\cup\Delta$, 
	$\Gamma\entails \PIinc(C) \lor \lifiboth{C}$.
\end{clemma}



\begin{clemma}
	For a clause $C$ of a resolution refutation of $\Gamma\cup\Delta$, 
	$\Gamma\entails \Q(C)(\PIinc(C) \lor \lifiboth{C})$.
\end{clemma}

\end{document}
