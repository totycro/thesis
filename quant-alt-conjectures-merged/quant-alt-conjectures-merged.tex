\documentclass[,%fontsize=11pt,%
	%landscape,
	%DIV8, % mehr text pro seite als defaultyyp
	%DIV10,
	%DIV=calc,%
	%article,
	draft=false,% final|draft % draft ist platzsparender (kein code, bilder..)
	%titlepage,
	numbers=noendperiod
	12pt,
	a4paper,
	oneside,% apparently, this should stay below some other parameter to have an effect
	openany,
	%]{scrartcl}
]{memoir}



\usepackage[bitstream-charter]{mathdesign}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}

\input{../latex_header.tex}



%\renewcommand{\familydefault}{ \sfdefault }
%\renewcommand{\rmdefault}{ppl}


%\usepackage[urw-garamond]{mathdesign}





% subsections also in toc
\setcounter{tocdepth}{2}
\setsecnumdepth{subsection}


\definethms

\def\proofSkipAmount{ \vskip -0.1em }


%\usepackage{bussproof}

%\usepackage{vaucanson-g}
%\usepackage{amssymb}
%\usepackage{amsmath}
\usepackage{latexsym}

% for color-highlighted code
%\usepackage{color} % for grey comments
%\usepackage{alltt}

%\usepackage[doublespacing]{setspace}
%\usepackage[onehalfspacing]{setspace}
%\usepackage[singlespacing]{setspace}


\usepackage{amsthm}


\chapterstyle{madsen}


% define page numbering styles
\makepagestyle{numberCorner}
\makeevenfoot{numberCorner}{\thepage}{}{}
\makeoddfoot{numberCorner}{}{}{\thepage}

\makepagestyle{numberCenter}
%\makeevenfoot{numberCenter}{}{\thepage}{}
%\makeoddfoot{numberCenter}{}{\thepage}{}
%
%\makeevenhead{numberCenter}{\thechapter}{}{\thesection}
%\makeoddhead{numberCenter}{\thesection }{}{\thechapter}
\makeheadrule{numberCenter}{\textwidth}{1pt}

\makeevenhead{numberCenter}{\thepage}{}{\leftmark}
\makeoddhead{numberCenter}{\rightmark}{}{\thepage}


\makeatletter
\makepsmarks{numberCenter}{
	\def\chaptermark##1{\markboth{%
			\ifnum \value{secnumdepth} > -1
			\if@mainmatter
			\chaptername\ \thechapter\ --- %
			\fi
			\fi
	##1}{}}
	\def\sectionmark##1{\markright{%
			\ifnum \value{secnumdepth} > 0
			\thesection. \ %
			\fi
	##1}}
}
\makeatother
\newcommand{\mysetpagestyle}{
	%\pagestyle{numberCorner}
	\pagestyle{numberCenter}
}
\mysetpagestyle





\usepackage{refcheck}

%\settypeblocksize{0.67\stockheight}{0.67\stockwidth}{*}
%\setlrmargins{*}{*}{1.2}
%\setulmargins{*}{*}{1.4}
%\checkandfixthelayout[nearest]

\counterwithout{section}{chapter}



\newcommand{\inv}{\ensuremath{\chi}}

\begin{document}

\chapter{ Number of quantifier alternations in Huang and nested }

\section{ Preliminaries }

For $\sigma = \mgu(\varphi, \psi)$ for two terms or literals $\varphi$ and $\psi$, we denote by $\sigma_i$ for $1\varleq i \varleq n$ the $i$th substitution which is added to $\sigma$ by the unification algorithm, where $n = |\dom(\sigma)|$.
We define $\sigma_0 \defeq \id$.

We furthermore denote the composition of all $\sigma_k$ for $i\varleq k \varleq j$ by $\sigmarange{i}{j}$.
Hence $\sigma = \sigmarange{1}{n} = \sigmarange{0}{n}$.

~

A literal $l$ is called a $\Phi$-literal if its predicate symbol is $\Phi$-colored.


%A term $t$ is \defiemph{single-colored} if $t$ is $\Phi$-colored for some $\Phi$ and all colored symbols in $t$ are $\Phi$-colored.
\NB{The notion of single-colored is considered to be deprecated here.}

In a literal or term $\phi$ containing a subterm $t$, $t$ is said to occur \defiemph{below} a $\Phi$-symbol $s$ if in the syntax tree representation of $\phi$, there is a node labelled $s$ on the path from the root to $t$. Note that the colored symbol may also be the predicate symbol.
Moreover, $t$ is said to occur \defiemph{directly below} a $\Phi$-symbol if it occurs below the $\Phi$-symbol $s$ and in the syntax tree representation of $\phi$ on the path from $s$ to $t$, no nodes with labels with colored symbol occur.

~

Quantifier alternations in $I$ usually assumes the quantifier-alternation-minimizing arrangement of quantifiers in $I$. The lemma statements hence talk about the \emph{minimal} number of quantifier alternations, which is indeed easily obtainable, i.e.\ it's a lower and upper bound at the same time.

~

In the following, we assume that the maximum $\max$ of an empty sequence is defined to be $0$ and constants are treated as function symbols of arity $0$.
Furthermore $\bot$ is used to denote a color which is not possessed by any symbol.
\begin{defi}[Color alternation $\ca$]
	Let $\Gamma$ and $\Delta$ be sets of formulas and $t$ be a term.

	\medskip

	\noindent
	$\ca(t) \defeq \ca_\bot(t)$
	\medskip

	\noindent
	$
	\ca_\Phi(t) \defeq 
	\begin{cases}
		0 & \text{$t$ is a variable} \\
		\max(\ca_\Phi(t_1), \dots, \ca_\Phi(t_n)) & \text{$t = f(t_1, \dots, t_n)$ is grey} \\
		\max(\ca_\Phi(t_1), \dots, \ca_\Phi(t_n)) & \parbox[t]{0.4\textwidth}{$t = f(t_1, \dots, t_n)$ is of color $\Phi$} \\
		1 + \max(\ca_\Psi(t_1), \dots, \ca_\Psi(t_n)) & \parbox[t]{0.38\textwidth}{$t = f(t_1, \dots, t_n)$ is of color $\Psi$, $\Phi \neq \Psi$} \\
	\end{cases}
	$
\end{defi}


\begin{defi}[Quantifier alternation $\qa$]
	Let $A$ be a formula.\nopagebreak
	\medskip

	\noindent
	$\qa(A) \defeq \qa_\bot(A)$
	\nopagebreak
	\medskip

	\noindent
	$
	\qa_Q(A) \defeq 
	\begin{cases}
		0 & \text{$A$ is an atom} \\
		\qa_Q(B) & \text{$A \equiv \lnot B$} \\
		\max(\parbox[t]{0.2\textwidth}{$\qa_Q(B),$\newline$ \qa_Q(C))$} & \text{$A \equiv B \circ C$, $\circ \in \{\land, \lor, \limpl\}$} \\
		\qa_Q(B) & \text{$A \equiv Q' B$, $Q = Q'$} \\
		1+\qa_{Q'}(B) & \text{$A \equiv Q' B$, $Q \neq Q'$}  \\
	\end{cases}
	$
	\nopagebreak

	\qedhere
\end{defi}
Note that this definition of quantifier alternations handles formulas in prenex and non-prenex form.

\begin{defi}
	We define $\PIstepnosigma$ to coincide with $\PIstep$ but without applying the substitution $\sigma$ in each of the cases.
	Analogously, if $C \equiv D\sigma$, we use $C\nosigma$ to denote $D$.
\end{defi}
Hence $\PIstepnosigma(\cdot) \sigma = \PIstep(\cdot)$.

\section{Occurrence of terms in the interpolant}

\begin{defi}[$\PI^*$]
	$\PI^*$ is defined as $\PI$ with the difference that in $\PI^*$, all literals are considered to be grey.
\end{defi}

Hence $\PIinit^*$ coincides with $\PIinit$.
$\PIstep^*$ coincides with $\PIstep$ in case of factorisation and paramodulation inferences.
For resolution inferences, the first two cases in the definition of $\PIstep$ do not occur for $\PIstep^*$.

$\PI^*$ enjoys the convenient property that it absorbs every literal which occurs some clause:

\begin{prop}
	\label{prop:every_lit_in_pi_star},
	For every literal which occurs in a clause of a resolution refutation $\pi$, a respective successor occurs in $\PI^*(\pi)$.
\end{prop}
\begin{proof}
	By structural induction.
\end{proof}

\begin{lemma}
	\label{lemma:grey_lits_of_pi_star_in_pi}
	For every clause $C$ of a resolution refutation,
	every grey literal, which occurs in $\PI^*(C)$, also occurs in $\PI(C)$.
\end{lemma}
\begin{proof}
	Note that $\PIinit$ and $\PIinit^*$ coincide and $\PIstep$ and $\PIstep^*$ only differ for resolution inferences.
	But more specifically, they only differ on resolution inferences, where the resolved literal is colored. However here, no grey literals are lost.
\end{proof}

Note that in $\PI^*$, we can conveniently reason about the occurrence of terms as no terms are lost throughout the extraction.
However Lemma~\ref{ref:grey_lits_of_pi_star_in_pi} allows us to transfer results about grey literals to $\PI$.
We can also give similar results about general literals and equalities occurring in the resolution refutation:

\begin{lemma}
	\label{lemma:grey_lits_all_in_PI}
	If there is a grey literal $\lambda$ in a clause $C$ of a resolution refutation $\pi$,
	then a successor of $\lambda$ occurs in $\PI(\pi)$.
\end{lemma}
\begin{proof}
	Immediate by the definition of $\PI$.
\end{proof}

\begin{lemma}
	\label{lemma:equalities_all_in_PI}
	For every equality $s=t$ of a clause in a resolution refutation $\pi$,
	a successor of $s=t$ occurs in $\PI(\pi)$.
\end{lemma}
\begin{proof}
	Equalities in clauses are only removed by means of paramodulation and as $\pi$ derives the empty clause, all equalities are removed eventually.
	For any paramodulation inference $\inference$ using the equality $s=t$, $\PIstep(\inference, I_1, I_2)$ contains $s=t$. 
\end{proof}


We now make some considerations in the form of four lemmata about the construction of terms of certain shapes in the context of interpolant extraction.
In the following, we abbreviate $\PIstepstarnosigma(\inference, \PI^*(C_1), \dots, \PI^*(C_n)) \lor C\nosigma$ by $\inv$.

\begin{lemma}
	\label{lemma:var_below_phi_symbol}
	Let $\inference$ be a resolution or factorisation inference in a refutation of $\Gamma\cup\Delta$.
	Suppose that a variable $u$ occurs directly below a $\Phi$-symbol in $\inv\sigmazi$ for $i\vargeq 1$.
	Then at least one of the following statements holds:
	\begin{enumerate}
		\item
			\label{14_1}
			The variable $u$ occurs directly below a $\Phi$-symbol in $\inv\sigmazmi$.

		\item
			\label{14_4}
			The variable $u$ occurs at a grey position in a grey literal or at a grey position in an equality in $\inv\sigmazmi$.

		\item 
			\label{14_2}
			There is a variable $v$ such that 
			{
				\renewcommand{\labelitemi}{\textendash}
				\begin{itemize}
					\item $u$ occurs grey in $v\sigma_i$ and
					\item $v$ occurs in $\inv\sigmazmi$ directly below a $\Phi$-symbol as well as directly below a $\Psi$-symbol
				\end{itemize}
			}

	\end{enumerate}
\end{lemma}
\begin{proof}
	We consider the different situations under which the situation in question is introduced by means of unification: 

	\begin{itemize}
		\item
			There is already a literal in $\inv\sigmazmi$ where $u$ occurs directly below a $\Phi$-symbol and $\sigma_i$ does not change this.
			Then clearly \ref{14_1} is the case.

		\item
			There is a variable $v$ in $\inv\sigmazmi$ such that $v\sigma_i$ contains $u$ directly below a $\Phi$-symbol.
			As then $v$ is unified with the term $v\sigma_i$, $v\sigma_i$ must occur in $\inv\sigmazmi$, which implies that \ref{14_1} is the case.

		\item
			There is a variable $v$ which occurs directly below a $\Phi$-symbol such that $u$ occurs grey in $v\sigma_i$.

			Hence in the resolved or factorised literals $\lambda$ and $\lambda'$, there is a position $p$ such that without loss of generality $\lambda\atp = v$ and $u$ occurs grey in $\lambda'\atp$. 
			Note that due to the definition of the unification algorithm, $\lambda$ and $\lambda'$ must coincide on the path to $p$.

			By Proposition \ref{prop:every_lit_in_pi_star}, $\lambda$ and $\lambda'$ occur in $\inv$ irrespective of their coloring.

			\mytodo{ it must be $\lambda$ and $\lambda'$ with the appropriate amount of $\sigma$ steps applied }

			We distinguish cases based on the position $p$:

			\begin{itemize}
				\item Suppose that $p$ occurs directly below a $\Phi$-symbol.
					Then as $u$ occurs grey in  $\lambda'\atp$, $u$ occurs directly below a $\Phi$-symbol in $\inv\sigmazmi$ and \ref{14_1} is the case.

				\item Suppose that $p$ occurs directly below a $\Psi$-symbol.
					Then $v$ occurs directly below a $\Psi$-symbol in $\lambda\atp$ and clearly \ref{14_2} is the case.

				\item
					Suppose that $p$ does not occur directly below a colored symbol.
					Then $p$ does not occur below any colored symbol, hence it is contained in a grey literal in a grey position and \ref{14_4} is the case.

			\end{itemize}
	\end{itemize}

\end{proof}

\begin{lemma}
	\label{lemma:var_below_phi_symbol_paramod}
	Let $\inference$ be a paramodulation inference in a refutation of $\Gamma\cup\Delta$.
	Suppose that a variable $u$ occurs directly below a $\Phi$-symbol in $\inv\sigmazi$ for $i\vargeq 1$.
	Then at least one of the following statements holds:
	\begin{enumerate}
		\item
			\label{15_1}
			The variable $u$ occurs directly below a $\Phi$-symbol in $\inv\sigmazmi$.

		\item
			\label{15_4}
			The variable $u$ occurs at a grey position in a grey literal or at a grey position in an equality in $\inv\sigmazmi$.

		\item
			\label{15_3}
			$u$ grey in equality in $\inv\sigmazi$. \mytodo{possibly merge with \ref{15_4} since that one implies this one.}

		\item 
			\label{15_2}
			There is a variable $v$ such that 
			{
				\renewcommand{\labelitemi}{\textendash}
				\begin{itemize}
					\item $u$ occurs grey in $v\sigma_i$ and
					\item $v$ occurs in $\inv\sigmazmi$ directly below a $\Phi$-symbol as well as directly below a $\Psi$-symbol
				\end{itemize}
			}


	\end{enumerate}
\end{lemma}
\cbstart
\begin{proof}
	We consider the different situations under which the situation in question is introduced by means of unification: 
	\begin{itemize}
		\item
			was there before, \ref{15_1}

		\item
			$u$ direcly below $\Phi$-term in $\ran(\sigma_i)$, then \ref{15_1}

		\item
			$u$ occs grey in $t$ and $p$ occs direcly below $\Phi$-symbol.
			Then $u$ grey in an equality in $\inv\sigmazmi$, \ref{15_4}

		\item
			Supp var $v$ somewhere directly below $\Phi$-symbol s.t.\ $u$ grey in $v\sigma_i$.

			We consider a paramodultion inference of the following form:
			The clause $C$ is the result of a paramodulation inference\nolinebreak{} $\inference$ of
			the clauses $C_1: s=t \lor D$ and $C_2: E\occatp{r}$ with $\sigma=\mgu(\inference)=\mgu(s, r)$ yield $C: (D\lor E\occatp{t})\sigma$.

			Hence by the definition of the unification algorithm, there exists a position $q$ such that one of $s\atp$ and $r\atp$ is $v$ and the other one contains a grey occurrence of $u$.

			We distinguish cases based on the coloring of the position $q$:

			\begin{itemize}
				\item Supp $q$ dir below $\Phi$: Then $u$ dir below $\Phi$ in $\inv\sigmazmi$ and \ref{15_1}.
				\item Supp $q$ dir below $\Psi$: Then $v$ dir below $\Phi$ and dir below $\Psi$ in $\inv\sigmazmi$ and \ref{15_2}.
				\item Supp $q$ grey.

					Then irrespective if where $u$ and $v$ are (as $u$ grey in $v\sigma_i$), in $\inv\sigmazi$ $u$ is grey in equality and \ref{15_3}.
			\end{itemize}



	\end{itemize}
\end{proof}
\cbend


\begin{lemma}
	\label{lemma:col_change}
	Let $\inference$ be an inference of a resolution refutation of $\Gamma \cup \Delta$.
	Suppose that a variable $u$ occurs directly below a $\Phi$-symbol as well as directly below a $\Psi$-symbol in $\inv\sigmazi$.
	Then $u$ occurs grey in a grey literal or grey in an equality in $\inv\sigmazi$.
\end{lemma}
\begin{proof}
	We proceed by induction over the refutation.
	As the original clauses each contain symbols of at most one color, the base case is trivially true.

	For the induction step, suppose that an inference makes use of the clauses $C_1, \dots, C_n$ and that the lemma holds for $\PI^*(C_j) \lor C_j$ for $1\varleq j \varleq n$. 

	Note that then, the lemma holds for $\inv = \PIstepstarnosigma(\inference, \PI^*(C_1), \dots, \PI^*(C_n)) \lor C\nosigma)$.
	This is because as all clauses are variable-disjoint, no variable can occur $\inv$ both directly below a $\Phi$-symbol as well as directly below a $\Psi$-symbol if this was not the case in $\PI^*(C_j) \lor C_j$ for some $j$, for which the lemma by assumption holds.
	Furthermore, by the definition of $\PI^*$, every literal which occurs in $\PI^*(C_j) \lor C_i$ for some $j$ occurs in $\inv$.

	Hence it remains to show that the lemma holds for $\inv\sigma = \inv\sigma_0\quantifierdots\sigma_m$, which we do by induction over $i$ for $1\varleq i \varleq m$.
	Suppose that the lemma holds for $\inv\sigmazmi$ and in $\inv\sigmazi$, the variable $u$ occurs directly below a $\Phi$-symbol as well as directly below a $\Psi$-term.

	Then by the lemmata~\ref{lemma:var_below_phi_symbol} and \ref{lemma:var_below_phi_symbol_paramod}, we can deduce that one of the following statements holds for $\Omega = \Phi$ as well as $\Omega = \Psi$. We denote case $j$ for $\Omega = \Phi$ by $j^\Phi$ and for $\Omega = \Psi$ by $j^\Psi$.

\begin{enumerate}
		\item
			\label{16_1}
			The variable $u$ occurs directly below a $\Omega$-symbol in $\inv\sigmazmi$.

		\item
			\label{16_4}
			The variable $u$ occurs at a grey position in a grey literal or at a grey position in an equality in $\inv\sigmazi$.

			\mytodo{ propagate upwards }

		\item 
			\label{16_2}
			There is a variable $v$ such that 
			{
				\renewcommand{\labelitemi}{\textendash}
				\begin{itemize}
					\item $u$ occurs grey in $v\sigma_i$ and
					\item $v$ occurs in $\inv\sigmazmi$ directly below a $\Phi$-symbol as well as directly below a $\Psi$-symbol
				\end{itemize}
			}
	\end{enumerate}

	If \ref{16_4}$^\Phi$ or \ref{16_4}$^\Psi$ is the case, we clearly are done.
	On the other hand \ref{16_2}$^\Phi$ or \ref{16_2}$^\Psi$ is the case, then by the induction hypothesis, $v$ occurs grey in a grey literal or grey in an equality in $\inv\sigmazmi$. 
	As $u$ occurs grey in $v\sigma_i$, we obtain that then, $u$ occurs grey in a grey literal or grey in an equality in $\inv$.

	Hence the only remaining possibility is that both \ref{16_1}$^\Phi$
	and \ref{16_1}$^\Psi$ hold.
	But then $u$ occurs directly below a $\Phi$-symbol as well as below a $\Psi$-symbol in $\inv\sigmazmi$ and again by the induction hypothesis, we obtain that $u$ occurs grey in a grey literal or grey in an equality in $\inv\sigmazmi$ and as $\sigma_i$ is trivial on $u$, the same occurrence of $u$ is present in $\inv\sigmazi$.
\end{proof}


\begin{clemma}
	If $\PI^*(C) \lor C$ for a clause $C$ in a resolution refutation of $\Gamma \cup \Delta$ contains a maximal colored occurrence of a $\Phi$-term $t\occ{s}$, which contains a maximal $\Psi$-colored term $s$, then $s$ occurs grey in a grey literal or grey in an equality in $\PI^*(C) \lor C$.
\end{clemma}
\begin{proof}
	We proceed by induction over the resolution refutation.
	As the original clauses each contain symbols of at most one color, the base case is trivially true.

	The induction step is layed out similarily as in the proof of Lemma~\ref{lemma:col_change}. 
	We suppose that an inference makes use of the clauses $C_1, \dots, C_n$ and that the lemma holds for $\PI^*(C_j) \lor C_j$ for $1\varleq j \varleq n$. 
	Then the lemma holds for $\inv = \PIstepstarnosigma(\inference, \PI^*(C_1), \dots, \PI^*(C_n)) \lor C\nosigma)$ as no new terms are introduced in $\inv$ and all literals from $\PI^*(C_j) \lor C_j)$ for $1\varleq j \varleq n$ occur in~$\inv$.

	It remains to show that the lemma holds for $\inv\sigma = \inv \sigma_0 \quantifierdots \sigma_m$, which we do by induction over $i$ for $0 \varleq i \varleq m$.
	We distinguish on the situation under which a unification leads to the term $t\occ{s}$.

	\begin{itemize}
		\item 
			Suppose for some variable $u$ that $u\sigma_i$ contains $t\occ{s}$. 
			Then $u$ is unified with a term which contains $t\occ{s}$ and occurs in $\inv\sigmazmi$.
			Hence by the induction hypothesis, $s$ occurs grey in a grey literal or grey in an equality in $\inv\sigmazmi$ and ,as $\sigma_i$ does not change this, also in $\inv\sigmazi$.

		\item 
			Otherwise there is a variable $u$ which occurs directly below a $\Phi$-symbol and $v\sigma_i$ contains a grey occurrence of $s$.
			We distinguish based on the occurrences of $u$ in $\inv\sigmazmi$:

			\begin{itemize}
				\item Suppose that $u$ occurs in $\inv\sigmazmi$ in grey a grey literal or grey in an equality. Then clearly we are done.
				\item Suppose that $u$ occurs in $\inv\sigmazmi$ directly below a $\Psi$-symbol.
					Then by Lemma~\ref{lemma:col_change}, $u$ occurs grey in a grey literal or grey in an equality in $\inv\sigmazmi$, whose successor in $\inv\sigmazi$ is an occurrence of $s$ of the same coloring.
				\item Suppose that $u$ occurs in $\inv\sigmazmi$ only directly below a $\Psi$-symbol.
					Here, we differentiate between the types of inference of the current induction step:

					\begin{itemize}
							Suppose that the current 
							\mytodo{ICI}
					\end{itemize}

			\end{itemize}

			{
				LESS PROPERLY:
				\tiny
			\cbstart
			\begin{itemize}
				\item $u$ anywhere grey in grey lit or grey in equa: done
				\item $u$ anywhere dir below a $\Psi$-symbol: Lemma~\ref{lemma:col_change} on $u$ 
				\item Otw: $u$ only below $\Phi$-symbol

					\begin{itemize}
						\item Supp directly below $\Phi$-col function symbol

							\begin{itemize}
								\item Supp res/fac inf.
									Then $u$ and $s$ at essentially corresponding positions in $\lambda$ and $\lambda'$.
									hence $s$ also dir below $\Phi$-symbol and IH to the rescue.
								\item Supp paramod inf.

									Notation:
									The clause $C$ is the result of a paramodulation inference\nolinebreak{} $\inference$ of
									the clauses $C_1: r_1=r_2 \lor D$ and $C_2: E\occatp{r}$ with $\sigma=\mgu(\inference)=\mgu(r_1, r)$ yield $C: (D\lor E\occatp{r_2})\sigma$.

									$u$ and $s$ occur in essentially corresponding positions in $r_1$ and $r$.
									same argument: if one dir below $\Phi$-symbol, so is other, hence $s$ is and IH.

							\end{itemize}

						\item Supp directly below $\Phi$-col predicate symbol

							\begin{itemize}
								\item Supp res/fac inf.

									as $u$ dir below $\Phi$-col sym, which is a predicate, then only so in res/fac lit.

									Hence other res fac lit contains $s$ grey, hence IH. 

								\item Supp paramod.

									Notation:
									The clause $C$ is the result of a paramodulation inference\nolinebreak{} $\inference$ of
									the clauses $C_1: r_1=r_2 \lor D$ and $C_2: E\occatp{r}$ with $\sigma=\mgu(\inference)=\mgu(r_1, r)$ yield $C: (D\lor E\occatp{r_2})\sigma$.

									Then  $u$ cannot occur in equality used in paramodulation as this is not a $\Phi$-colored literal and by assumption, $u$ does not occur grey here.

									Hence $u$ occs in $r$, and $E$ is $\Phi$-colored and $p$ is a grey position and $u$ occurs grey in $r$.

									... $u$ occurs elsewhere in $C_2$ directly below a $\Phi$-colored symbol (predicate symbol that is)
									 
									$s$ occs in $r_1$ grey???
								


							\end{itemize}
					\end{itemize}
			\end{itemize}
			\cbend
		}
	\end{itemize}




\end{proof}

\end{document}



