\documentclass[,%fontsize=11pt,%
	paper=a4,% 
	%landscape,
	DIV11, % mehr text pro seite als defaultyyp
	%DIV10, 
	%DIV=calc,%
	twoside=false,%
	liststotoc,
	bibtotoc,
	draft=false,% final|draft % draft ist platzsparender (kein code, bilder..)
	%titlepage,
	numbers=noendperiod
]{scrartcl}

\usepackage{lscape}
\usepackage{stackengine}


\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}

\usepackage{enumerate}
\usepackage{paralist}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,backgrounds,graphs,%
	matrix,patterns,arrows,decorations.pathmorphing,decorations.pathreplacing,%
	positioning,fit,calc,decorations.text,shadows%
}


\input{../latex_header.tex}

% sections also in toc
\setcounter{tocdepth}{2}

\definethms

% for color-highlighted code
%\usepackage{color} % for grey comments
%\usepackage{alltt}

%\usepackage[doublespacing]{setspace}
\usepackage[onehalfspacing]{setspace}
%\usepackage[singlespacing]{setspace}
\usepackage{tabularx}
\usepackage{hyperref}
\usepackage{comment}
\usepackage{color}
\usepackage[final]{listings} % sourcecode in document
\usepackage{url}      % for urls
\usepackage{multicol}
\usepackage{float}
\usepackage{caption}
\usepackage{subfigure}
\usepackage{amsmath}
\usepackage{amssymb}

\usepackage{graphicx}

\usepackage[authoryear]{natbib} % \cite ; square|round etc.
%\usepackage[numbers,square]{natbib}
%\usepackage[square, authoryear]{natbib}
%\usepackage[language=english]{biblatex}

%\bibliographystyle{plain}
\bibliographystyle{alpha}
%\bibliographystyle{alphadin}
%\bibliographystyle{dinat}
%\bibliographystyle{chicago}
%\bibliographystyle{plainnat}

\bibdata{bib.bib}

\renewcommand*{\partformat}{\partname\ \thepart\ -}
\let\partheadmidvskip\

\newcommand{\comp}{\ensuremath{\text{comp}}}
% smaller url style
\makeatletter
\def\url@leostyle{%
\@ifundefined{selectfont}{\def\UrlFont{\sf}}{\def\UrlFont{\small\ttfamily}}}
\makeatother
\urlstyle{leo}

\newcommand{\myfig}[5] {
	\begin{figure}[tbph]
		\centering
		\includegraphics[#3]{#1}
		\caption[#4]{#5}
		\label{fig:#2}
	\end{figure}
}

\setlength{\parindent}{0em}
%\usepackage{thmtools} % actually already in latex_header.tex ...

\usepackage{amsthm}


\usepackage{tikz-qtree}

%\newcommand{\sig}[1]{{#1}_\Sigma}
%\newcommand{\p}[1]{{#1}_\Pi}
\newcommand{\sig}[1]{\stackrel{\Sigma}{#1}}
\newcommand{\p}[1]{\stackrel{\Pi}{#1}}

\newcommand{\e}[1]{\vskip .7em   \section*{#1}}

%\def\proofSkipAmount{ \vskip -0.3em}

\usepackage{refcheck}

\newcommand{\lif}[1]{\lift{\Delta}{#1}{x}}
\newcommand{\newterm}{^*}
\newcommand{\de}{^\Delta}

\begin{document}

\section{serious stuff}

\begin{defi}[col change]
	col change: a var $x$ occurs in yet to specify location twice such that once in s.c.\ $\Gamma$-term and once in s.c.\ $\Delta$-term.
\end{defi}

\newcommand{\epsilondelta}{\varepsilon\occ\delta}
\newcommand{\epsilonx}{\varepsilon\occ x}
\newcommand{\epsilony}{\varepsilon\occ y}
\newcommand{\epsilonz}{\varepsilon\occ z}


\begin{defi}
	$\sigmarange{i}{j} \defeq \prod_{k=i}^j\sigma_k$.
\end{defi}

\begin{lemma}[corresponds to lemma 25 in -final]
	\label{new_25}
	Let $\sigma = \mgu(l, l') = \sigma_1 \cdots \sigma_n$.

	Suppose a s.c.\ $\Phi$-term $s\occ{y}$ occs in $l(')\sigmaz{i-1}$ where $1\varleq i \varleq n$ and $\sigma_0 = \id$ s.t.\ $\dom(\sigma_i) = \{y\}$ and a var $x$ occurs grey in $y\sigma_i$.
	At least one of the following statments holds:

	\begin{enumerate}
		\item $x$ occurs grey in $l(')\sigmazi$ (and $y$ in $l(')\sigmaz{i-1}$)
		\item $x$ occur in s.c.\ $\Phi$-term in $l(')\sigmaz{i-1}$  
			($\Ra$ $x$ occs in s.c.\ $\Phi$-col term in $l(')\sigmazi$)
			%$x$ occurs in a s.c.\ $\Phi$-term in
		\item there is a col change where $y$ is a col change var in $l(')\sigmaz{i-1}$ ( and $x$ in $l(')\sigmazi$) 
	\end{enumerate}
\end{lemma}
\begin{proof}
	If $y$ occurs grey somewhere in $l(')\sigmaz{i-1}$, we are done.\todo{ramp!}

	Suppose it only occurs colored in $l(')\sigmaz{i-1}$. (1)

	Suppose at least once in s.c.\ $\Psi$-term.
	Then in $l(')\sigmaz{i-1}$, $y$ is a col change variable (3)

	Otw.\ it occs only in $\Phi$-terms. 
	There must exist an occurrence $\bhat y$ of $y$ in literal $\lambda$ s.t.\ $\lambda'\at{\bhat y}$ is $y\sigma_i$.
But $\lambda\at{\bhat y}$ and $\lambda'\at{\bhat y}$ share the prefix, so $\lambda'\at{\bhat y}$ is a s.c.\ $\Phi$-term containing a grey occurrence of $x$. (2)
\end{proof}

not BS:

Let $\sigma = \mgu(l, l')$.

	Suppose a variable $y$ occs in $l(')\sigmaz{i-1}$ where $1\varleq i \varleq n$ and $\sigma_0 = \id$
	s.t.\ $\dom(\sigma_i) = \{y\}$ and $x$ occurs in a s.c.\ $\Phi$-term in $y\sigma_i$.

	THen in $l(')\sigmaz{i-1}$, $x$ occurs in a s.c.\ $\Phi$-term.


BS:
{

\tiny
\begin{lemma}[corresponds to lemma 26 in -final]
	Let $\sigma = \mgu(l, l')$.
	Suppose a variable $y$ occs in $l(')\sigmaz{i-1}$ where $1\varleq i \varleq n$ and $\sigma_0 = \id$
	s.t.\ $\dom(\sigma_i) = \{y\}$ and $x$ occurs in a s.c.\ $\Phi$-term in $y\sigma_i$.
	At least one of the following statments holds:

	\begin{enumerate}
		\item $x$ occurs grey in $l(')\sigmazi$
		\item $x$ occurs grey in a s.c.\ $\Phi$-term in $l(')\sigmazi$ (also in $l(')\sigmaz{i-1}$)
		\item there is a col change where $x$ is the col change var in $l(')\sigmazi$ 
	\end{enumerate}
\end{lemma}
\begin{proof}
	Suppose that $x$ does not occur grey in $l(')\sigmaz{i-1}$ as otherwise we are done.

	Suppose that $x$ also does not occur grey in a s.c.\ $\Phi$-term in $l(')\sigmaz{i-1}$ as otherwise we are done.
	
	So $x$ only occurs in s.c. $\Psi$-terms in $l(')\sigmaz{i-1}$.

	Let $\bhat y$ be the occ of $y$ of the diff pair. Then $\lambda'\at{\bhat y}$ contains an occ of $x$ in a s.c.\ $\Phi$-term.

\end{proof}

}

\begin{lemma}[corresponds to lemma 27 in -final]
	\label{new_27}
	Let $\sigma = \mgu(l, l')$, $C_1$ and $C_2$ var-disjoint and condition holds.

	\NB{this means that it holds for all resolution refutations if we pretend to have extended it to factorisation by just applying induction on exactly this. perhaps we should do this.}

	Suppose in $(C_1 \cup C_2)\sigmazi$ where $0\varleq i \varleq n$ and $\sigma_0 = \id$ there is a col change with var $x$ of $\Gamma$-term $s\occ{x}$ and $\Delta$-term~$t\occ{x}$.
	Then $x$ occs grey in $(C_1 \cup C_2)\sigmazi$.
\end{lemma}
\begin{proof}
	for $\sigma_0$, it holds.

	suppose holds for $\sigma_{i-1}$.

	3 possibilities for having a variable in a s.c.\ $\Phi$-term :
	\begin{compactenum}
	\item was there in stage $i-1$ in $(C_1 \cup C_2)\sigmaz{i-1}$
	\item $(C_1 \cup C_2)\sigmaz{i-1}$ contains term $t\occ{y}$ with $\dom(\sigma_i) = \{y\}$ and $x$ occs grey in $y\sigma_i$
	\item $(C_1 \cup C_2)\sigmaz{i-1}$ contains a variable $z$ such that $\dom(\sigma_i) = \{z\}$ and $x$ occs in a s.c.\ $\Phi$-term in $z\sigma_i$.
	\end{compactenum}

	apply this to both $s\occ{x}$ and $t\occ{x}$.

	if both variables were present in both colors in s.c.\ terms, we are done by the IH.

	So supp at least one introduced in stage $i$.
	this means at least for one of them situation 2 applies. 

	Hence lemma~\ref{new_25} applies, but not the case where $x$ already appeared in a respectively single-colored term before.

	but this means that for at least one of $s\occ{x}$ or $t\occ{x}$, $x$ occs grey in stage $i-1$ (this is stage $i$ in lemma~\ref{new_25}), or there is a col change with $x$ as var in $i-1$. 
	In the first case, we are done right away ($\sigma_i$ does not affect $x$ as $x$ still occurs after applying it), and in the second, we can use the IH.
\end{proof}

{\tiny

	small version: 

\begin{lemma}[corresponds to lemma 27 in -final (but only for literal!)]
	Let $\sigma = \mgu(l, l')$.
	Suppose in $l(')\sigmazi$ where $0\varleq i \varleq n$ and $\sigma_0 = \id$ there is a col change with var $x$ of $\Gamma$-term $s\occ{x}$ and $\Delta$-term~$t\occ{x}$.
	Then $x$ occs grey in $l(')\sigmazi$.
\end{lemma}
\begin{proof}
	induction.

	initially: $l\sigma_0$ and $l'\sigma_0$ var disjoint and condition holds for intra-vars. (so holds globally)

	3 possibilities for having a variable in a s.c.\ $\Phi$-term :
	\begin{compactenum}
	\item was there in stage $i-1$
	\item $l(')\sigmaz{i-1}$ contains term $t\occ{y}$ with $\dom(\sigma_i) = \{y\}$ and $x$ occs grey in $y\sigma_i$
	\item $l(')\sigmaz{i-1}$ contains a variable $z$ such that $\dom(\sigma_i) = \{z\}$ and $x$ occs in a s.c.\ $\Phi$-term in $z\sigma_i$.
	\end{compactenum}

	apply this to both $s\occ{x}$ and $t\occ{x}$.

	\hl{continuing with slightly different train of thought after returning from lunch:}

	if both s.c.\ $\Gamma$ and s.c.\ $\Delta$ were there in $i-1$, we are done by IH. this encompasses both 1 and 3, as by the non-BS lemma, it copies terms of a form.

	So suppose at least one introduced by situation 2.

	for both occs: either they were there in $i-1$, or we can apply lemma \ref{new_25}. in any case, we know that at least one of the three statments holds for both.

	Note index shift, in lemma all indices are one too many.

	If one of them has 1 ($x$ occurs grey in $l(')\sigmaz{i-1}$), we are done as $\sigma_i$ does not affect $x$ as $x$ occurs in $l(')\sigmazi$.

	If one of them has 3 (col change with $x$ in $l(')\sigmaz{i-1}$), then we apply the IH to it and get that $x$ occs grey in $l(')\sigmaz{i-1}$, so also in $l(')\sigmazi$.

	Otw. both were there before, which we supposed not to be the case for both, so one of them has to hit one of the other cases. 
\end{proof}

}

\begin{clemma}[corresponds to 29 in -final]
	If in $\AImatde(C) \lor \AIclde(C)$ a
	$\Gamma$-term $t\occatp{x_s}$ contains a $\Delta$-lifting variable $x_s$, then $x_s$ occurs grey in $\AIanyde(C)$,

\end{clemma}
\begin{proof}
	induction; base case works.

	supp resolution w/ usual notation.

	\begin{enumerate}
		\item Supp for some $i$ $\sigma_i = \{ u \mapsto s' \}$ s.t.\ $s'$ contains a $\Delta$-term, $s'\sigma = s$ and $u$ occurs in a maximal colored $\Gamma$-term at a single-colored $\Gamma$-position (i.e., must be below $\Gamma$-symbol and must not contain any other colored symbol as otherwise it would be lifted).

			We basically perform an induction over all construction steps of $\sigma$. Base case works by outer induction hypothesis.

			ind step:

			As $u$ is changed, it occurs in $l$ or $l'$, say in $\lambda$ at $\bhat u$.

			If $u$ occs grey anywhere in $C_{j}\sigmaz{i-1}$, in particular for example at $\lambda\sigmaz{i-1}\at{\bhat u}$, then done as $u\sigma_i = s'$, hence due to $s'\sigma=s$ we have that $u\sigma = s$.


			If $u$ occs anywhere in $C_{j}\sigmaz{i-1}$, in particular for example in $\lambda\sigmaz{i-1}\at{\bhat u}$, in a s.c.\ $\Delta$-term, then by Lemma~\ref{new_27}, $u$ occs grey in $(C_1\cup C_2)\sigmaz{i-1}$ and we are done as above.

			So suppose $u$ only occs in s.c.\ $\Gamma$-terms, in particular in $\lambda\sigmaz{i-1}\at{\bhat u}$. 
			But as $\lambda'\sigmaz{i-1}\at{\bhat u}$ has the same prefix, but it is $s'$, there is a $\Delta$-term in a $\Gamma$-term, so by the induction hypothesis $x_{s'}$ occs grey in $\AIanyde(C_j)$ for some $j$.

			As $\Gamma$-terms are not lifted in $\AIclde(C_j)$, $x_{s'}$ is not lifted there.

			As $s'$ is in the range of the unifier, $s'$ occurs in a resolved literal. 

			By the definition of $\aiu$, $\{x_{s'} \mapsto x_s\} \in \tau$
			as $s$ is the term at the position of $x_{s'}$ in $\lambda\sigma$ for $\lambda$ the resolved literal where $s'$ occurs.

			Hence there is a grey occurrence of $x_s$ in $\AIanyde(C)$.

		\item
			Suppose a variable $u$ occurs in $C_1$ or $C_2$ grey or in a maximal colored single colored $\Gamma$-colored term such that $u\sigma$ contains a multi-colored $\Gamma$-term $t$ 

			Then $\lambda'\sigmaz{i-}\at{\bhat{u}}$ actually is $t$ $\Ra$ IH.
			\qedhere

	\end{enumerate}
\end{proof}

\mytodo{ICI ICI ICI: this lemma should easily give the main result. extend to factorisation and write up nicely}

\clearpage

\section{old, incorrect version}


\begin{lemma}
	\label{lemma:unified_term_starts_somewhere_grey}
	Let $l$ and $l'$ be variable disjoint literals and $\sigma = \mgu(l, l')$
	such that for a variable $x$, $t$ occurs grey in $x\sigma$.

	Then there is a sequence of variables $x_1,\dots, x_n$ with $x_1 = x$ such that for $1\varleq i \varleq n-1$,
	$t$ occurs grey in $x_i \sigma$ and
	$x_i \mguarr r\occ{x_{i+1}}$, where $x_{i+1}$ occurs grey in $r\occ{x_{i+1}}$.
	Furthermore,
	$x_n \mguarr r_t$, where $r_t$ contains the outermost symbol of $t$ at a grey position.


	\mytodo{prove here as well: } if $x_i$ occurs grey/in s.c.\ $\Phi$-term, then $x_{i+1}$ occs grey/in s.c.\ $\Phi$-term due to literals same and term grey in unifier image.
\end{lemma}

\begin{proof}
	\mytodo{ accidentally proved below: }
	
	POSSIBLE BETTER STATEMENT:
	There is a sequence of variable $y_1, \dots, y_n$ such that $y_i\sigma$ contains $x$ and $y_i \mguarr r\occ{y_{i+1}}$ for $1\varleq i \varleq n-1$ where $r\occ{y_{i+1}}$ is a grey term and $y_n \mguarr r\occ{x}$, where $r\occ{x}$ is a grey term as well or a variable.

	Inductive definition:
	Let $y_1 = y$. For each $y_i$, $y_i \mguarr t$ for some $t$ such that $t$ is an abstraction of $y_i\sigma$, which is a term containing a grey occurrence of $x$.
	Hence either $x$ occurs in $t$, then $i=n$.
	Otherwise $x$ does not occur in $t$ and there is a variable in $t$ such that $v\sigma$ contains a grey occurrence of $x$.
	Let $y_{i+1} = v$.
	Note that as $\sigma$ only changes a finite number of variables, a variable can only be added to the sequence finitely often and cycles are not possible by the nature of the unification algorithm.
\end{proof}


\begin{lemma}
	\label{lemma:colored_y_sigma_contains_grey_x}
	Let a single-colored $\Phi$-term $s\occ{y}$ occur in $l$ or $l'$ such that $x$ occurs grey in $y\sigma$.
	Then at least one of the following statements holds:
	\begin{compactenum}
	\item
		there is a variable $z$ such that $x$ occurs grey in $z\sigma$ and $z$ occurs grey in $l$ or $l'$
		\label{27_z_grey}
	\item $x$ occurs in a s.c.\ $\Phi$-term \label{27_x_in_sc_phi}
	\item there is a variable $z$ such that $z\sigma$ contains a grey occurrence of $x$ and $z$ occurs in either $l$ or $l'$ two times: once in s.c.\ $\Phi$-term and once in $s.c.$\ $\Psi$-term.
		\label{27_mixed}

	\end{compactenum}
\end{lemma}
\begin{proof}

	By Lemma~\ref{lemma:unified_term_starts_somewhere_grey}, there is a sequence \dots.
	We distinguish on the coloring of $y_n$.

	\begin{itemize}
		\item Suppose that $y_n$ occurs grey. 
			Then we have established item~\ref{27_z_grey} where $z=y_n$.
		\item 
			Suppose that $y_n$ occurs in a single-colored $\Phi$-term.
			Then as $y_n \mguarr r\occ{x}$ where $r\occ{x}$ contains a grey occurrence of $x$, $x$ does so as well and we have established item~\ref{27_x_in_sc_phi}.
		\item 
			Suppose that $y_n$ occurs in a single-colored $\Psi$-term for $\Psi \neq \Phi$.
			\mytodo{this is now proved in lemma 24, drop here}
			As $y_1 = y$, $y_1$ occurs in a single-colored $\Phi$-term.
			As for $1 \varleq i \varleq n-1$, $y_i \mguarr r\occ{y_{i+1}}$ where $y_{i+1}$ occurs grey in  $r\occ{y_{i+1}}$, each successive variable occurs in the same coloring as the last one.
			As $y_1$ and $y_n$ are contained in single-colored terms of different colors, there must be some $j$, $1\varleq j\varleq n$, such that $y_j$ occurs in a clause once in a single-colored $\Phi$-term as well as in a single-colored $\Psi$-term, establishing item~\ref{27_mixed}.
			\qedhere
	\end{itemize}

\end{proof}


\begin{lemma}
	\label{lemma:y_sigma_contains_colored_x}
	Let a variable $y$ occur in $l$ or $l'$ such that $x$ occurs in a single-colored $\Phi$-term in $y\sigma$.
	Then at least one of the following statements holds:
	\begin{compactenum}
	\item 
		there is a variable $z$ such that $x$ occurs grey in $z\sigma$ and $z$ occurs grey in $l$ or $l'$
	\item
		a single-colored $\Phi$-term in $l$ or $l'$ contains $x$
		\label{29_grey_x}
	\item
		there is a variable $z$ such that $z\sigma$ contains a grey occurrence of $x$ and $z$ occurs in either $l$ or $l'$ two times: once in s.c.\ $\Phi$-term and once in $s.c.$\ $\Psi$-term.
	\end{compactenum}
\end{lemma}
\begin{proof}

	\mytodo{rewrite without the sequence; should be just like an algo and only an induction if i know how to do it properly}

	We attempt to build a sequence of variables $y_1, \dots, y_n$ such that $y_i\mguarr r\occ{y_{i+1}}$, where $r\occ{y_{i+1}}$ contains $y_{i+1}$ and does not contain $\Psi$-terms.
	Furthermore for $1\varleq i \varleq n-1$, $y_i\sigma$ contains a single-colored $\Phi$-term containing $x$ (and no $\Psi$-symbols) and $y_n\sigma$ contains a grey occurrence of $x$ (and no $\Psi$-symbols).

	Let $y_1 = y$.
	$y_i \mguarr t$.
	\begin{itemize}
		\item
			Suppose that $t$ contains a single-colored $\Phi$-term containing $x$.
			Then we have established item~\ref{29_grey_x} and relinquish the partial sequence.

		\item
			Suppose that $t$ contains a variable $v$ such that $x$ occurs grey in $v\sigma$ and $v$ occurs in a single-colored $\Phi$-term in $t$. 
			Then by Lemma~\ref{lemma:colored_y_sigma_contains_grey_x} gives the result.

		\item
			Suppose that $t$ contains a variable $v$ such that $v\sigma$ contains a single-colored $\Phi$-term containing $x$ and no $\Psi$-symbols. Then let $y_{i+1} = v$.
	\end{itemize}
	Note that since $y_i$ contains a single-colored $\Phi$-term containing $x$, one of the last two cases must be the case in case the first isn't.

\end{proof}



\begin{lemma}
	\label{lemma:smallest_colored_container}

	Let a variable $x$ occur in $C$ once in a single-colored $\Gamma$-term and once in a single-colored $\Delta$-term.\footnote{Note that these terms may be subterms of other terms.}
	Then $x$ occurs grey in $\AIany(C)$.

	% equivalent formulation:
	%Let a variable $x$ occur in $C$ such that there is one occurrence which is contained in a smallest colored term which is a $\Gamma$-term and another occurrence which is contained in a smallest colored term which is a $\Delta$-term.
	%Then $x$ occurs grey in $\AIany(C)$.

	% equivalent formulation:
	%Let $s\occ{x}$ and $t\occ{x}$ be terms occurring in $C$ such that
	%$x$ occurs in $s\occ{x}$ and $t\occ{x}$
	%and $s$ is a $\Gamma$-term and all symbols of $s\occ{x}$ are either grey or $\Gamma$-colored,
	%and $t$ is a $\Delta$-term and all symbols of $t\occ{x}$ are either grey or $\Delta$-colored.
	%Then $x$ occurs grey in $\AIany(C)$.
\end{lemma}
\mytodo{add formal details above and below if result works out}
\begin{proof}
	We proceed by induction on the resolution refutation:

	\begin{description}
		\item{}Base case.
			Clauses contained in $\Gamma$ do not contain $\Delta$-terms and clauses contained in $\Delta$ do not contain $\Gamma$-terms.

		\item{}Resolution/Factorisation.
			Suppose the clause $C$ is the result of a resolution step $\inference$ of $C_1: D \lor l$ and $C_2: E \lor \lnot l'$
			or of a factorisation step $\inference$ of $C_1: l \lor l' \lor D$.
			Let $\sigma = \mgu(\inference)$. 
			\mytodo{ avoid assigning $C_1$ twice here in final formulation }


			We consider an occurrence of a single-colored $\Phi$-term containing $x$ in $C$.
			There are three circumstances leading to this situation:
			\begin{compactenum}
				\item A single-colored $\Phi$-term containing $x$ occurs in a preceding clause.
				\item A single-colored $\Phi$-term $t\occ{y}$ in a preceding clause contains a variable $y$ such that $x$ occurs grey in $y\sigma$. \label{27_2}
				\item A variable $z$ occurs in a preceding clause such that $z\sigma$ contains a single-colored $\Phi$-term containing $x$. \label{27_3}
			\end{compactenum}

			We apply Lemma~\ref{lemma:colored_y_sigma_contains_grey_x} in the case of \ref{27_2} and
			Lemma~\ref{lemma:y_sigma_contains_colored_x} in the case of \ref{27_3} to obtain that in any of the cases, at least one of the following statements hold:

			[ copy formulation from lemma once it's finished there ]

			Now suppose that $x$ occurs in a single-colored $\Gamma$-term and in a single-colored $\Delta$-term in $C$.
			By applying the reasoning as just given, we know that one of the three statments holds for both occurrences. 

			If for any one $z$ grey with $z\sigma$ contains grey $x$, then done

			{ \tiny

				old way: 

				If IH-case, then: IH

				otw both s.c. $\Gamma$ and $\Delta$-term respectively $\Ra$ IH as well.

			}

			if for any one col change case, then col change var grey by IH, and this is unified to $x$.

			otw both IH case, so one in s.c.\ $\Gamma$ and one in s.c.\ $\Delta$, but due variable disjointness in same clause, that's why IH works here.
			\qedhere

	\end{description}
\end{proof}


application of lemma below:
Suppose such a term occurs in a clause. Then suppose that it occurs in same s.c.\ term in literal, otw grey (we are done) or other color (then IH). then lemma!

\begin{lemma}
	\label{lemma:u_sigma_contains_delta_term}
	Context: resolved literals.
	Suppose a single-colored $\Gamma$-term contains a variable $u$ such that a $\Delta$-term $s$ occurs grey in $u\sigma$.
	Then one of the following statements holds:
	\begin{compactenum}
	\item there is a variable $z$ such that $s$ occurs grey in $z\sigma$ and $z$ occurs grey in $l$ or $l'$ \mytodo{possibly change this everywhere to in $l\sigma$, $s$ occurs grey}
	\item a single-colored $\Gamma$-term in $l$ or $l'$ contains $s$ outermost symbol of $s$ and variables such that in total, with the unifier we get $s$
		%\item exists var s.t.\ once s.c.\ $\Gamma$, once s.c.\ $\Delta$
	\end{compactenum}
\end{lemma}
\begin{proof}
	Suppose sequence with each unifying to next one, last one: $u_n \mguarr r\occ{s}$, where $s$ occurs grey in $r$.
	also in lemma, successive variables in same coloring

	$u$ from lemma statement occs in $\bar u$. 	

	Suppose $u_i$ grey, then done as all $u_i\sigma$ contain grey $s$, hence case 1

	Suppose one $u_i$ occs s.c.\ $\Gamma$ and  s.c.\ $\Delta$. by lemma~\ref{lemma:smallest_colored_container}, $u_i$ occurs grey and $s$ occs grey as above, hence case 1

	Otw, all colored, and as successive vars same coloring, all same s.c.\ term.
	Start with $\Gamma$, hence all $\Gamma$. 
	Hence case 2 (term contains var $v$ at grey pos which has $s$ in grey pos at $v\sigma$), hence $s$ occs grey in $\Gamma$-term.



\end{proof}


\begin{lemma}
	If in $\AImatde(C) \lor \AIclde(C)$ a
	$\Gamma$-term $t\occatp{x_s}$ contains a $\Delta$-lifting variable $x_s$, then $x_s \apath_{G_C} t\occatp{x_s}$.
\end{lemma}
\begin{proof}
	We proceed by induction.

	\begin{description}
		\item{}Base case.
			For $C \in \Gamma\cup\Delta$, consider that no mixed-colored terms occur in $C$ and hence no $\Gamma$-term in $\AImatde(C) \lor \AIclde(C)$ can contain a $\Delta$-lifting variable.

		\item{}Resolution.
			Suppose the clause $C$ is the result of a resolution step $\inference$ of $C_1: D \lor l$ and $C_2: E \lor \lnot l'$ with $\sigma = \mgu(\inference)$ and $\tau = \aiu(\inference)$.
			There are two possible cases in which a $\Delta$-lifting variable $x_s$ can be subterm of a $\Gamma$-colored term $t\occatp{x_s}$ in $\AImatde(C)\lor \AIclde(C)$ such that this has not been the case in $C_1$ or $C_2$:

			\begin{enumerate}

				\item Suppose a maximal colored $\Gamma$-term in $C_1$ or $C_2$ contains a variable $u$ such that $s$ occurs grey in $u\sigma$.
					\label{25_1}

					Note that it suffices to show that $x_s$ occurs grey in $\AIanyde(C)$,
					since if we suppose that it does so at position $r$,
					then $\arr_1$ as defined in Definition~\ref{def:arrows} contains $(r, q)$ such that $\AIclde(C)\at{q}$ is $t\occatp{x_s}$.
					As $\arr_1 \subseteq G_C$, this implies $x_s \apath_{G_C} t\occatp{x_s}$.

					We apply Lemma~\ref{lemma:u_sigma_contains_delta_term} as we can assume that this is also a s.c.\ $\Gamma$-term (otherwise it would contains a $\Delta$-term and be lifted \NB{afterthought, did not check global implications for this lemma}).

					in case 1, $s$ occs grey.

					in case 2, IH for that term, say $s'$: $s' \apath_{G_{C_j}} \gamma'\occ{s'}$
					$s'$ is maximal $\Delta$-term (else would be contained in $r$ and we would talk about $x_r$).
					as $\Gamma$-terms not lifted, $s'$ occurs ``grey''.
					As $s$ is in range of subst, $s$ occurs in literal being unified,
					by the definition of $\aiu$, $\{x_s \mapsto x_r\} \in \tau$
					as $r$ is the term at the position of $x_s$ in $\lambda\sigma$ for $\lambda$ the resolved literal where $s'$ occurs.

					Hence there is a grey occurrence of $x_s$ in $\AIanyde(C)$.
					\mytodo{check this}




					{\fontsize{1}{1}\selectfont 

						By Lemma~\ref{lemma:proof_along_mgu}, there is a sequence of variable $u_1, \dots, u_n$ such that $u_1 = u$ and $s$ occurs grey in $u_i \sigma$ for $1\varleq i \varleq n$.
						Note that if any variable $u_i$ occurs grey in $C_1$ or $C_2$, then at the corresponding position in $C$, the term at this position is a grey occurrence of $s$ and we are done.\todo{this is the ramp!}{}
						Therefore suppose that $u_1, \dots, u_n$ occur only colored in $C_1$ and $C_2$.

						Note that in the prefix of $x_s$ in $t\occatp{x_s}$, no $\Delta$-colored symbol occurs as otherwise $x_s$ would not occur in this term.
						Hence the smallest colored term containing the occurrence of $u$ in the predecessor of $t\occ{x_s}$ is a $\Gamma$-term.

						Lemma~\ref{lemma:proof_along_mgu} furthermore asserts that $u_i$ occurs in a resolved literal $l_i$ at $l_i\at{\bhat u_i}$ such that in the respective opposite resolved literal $l_i'$, $l_i'\at{\bhat u_i}$ contains $u_{i+1}$ for $1\varleq i\varleq n-1$ and $l_n'\at{\bhat u_n}$ contains the outermost symbol of $s$.
						Note that for $1\varleq i \varleq n$, $u_i$ occurs at least twice in its respective clause.
						Note also that as $l_i\sigma = l_i'\sigma$, $l\at{\bhat u_i}$ and $l'\at{\bhat u_i}$ share the prefix of $\bhat u_i$, so if $l\at{\bhat u_i}$ is contained in a $\Phi$-colored term, then so is the grey occurrence of $u_{i+1}$ in $l'\at{\bhat u_i}$.

						If one of the $u_i$ occurs in a clause twice such that for one occurrence, the smallest colored term containing it is $\Gamma$-colored and for the other one, the smallest colored term containing it is $\Delta$-colored, then by Lemma~\ref{lemma:smallest_colored_container}, $u_i$ occurs grey in $\AIany(C)$ and we are done.
						Therefore assume that this situation does not arise for any $u_i$, $1\varleq i \varleq n$.

						Hence as the smallest colored term containing the occurrences of $u_1$ must be $\Gamma$-terms, the same holds for $u_n$.
						But as $l'_n\at{ \bhat u_n }$ contains the outermost symbol of $s$, which is a $\Delta$-term, and $l_n\sigma = l_n'\sigma$ and the smallest colored term containing $l_n\at{ \bhat u_n }$ is a $\Gamma$-term,
						$l'_n\at{ \bhat u_n }$ is contained in a $\Gamma$-term.
						Let $r\occ{x_\varphi}$ be hte maximal colored term containing $l'_n\at{ \bhat u_n }$ and $x_\varphi$ be the lifting variable at the position of the outermost symbol of $s$ in $l'_n{}\cl\at{ \bhat u_n }$.
						Let $C_j$ be the clause containing $l'_n$.

					}

					\begin{comment}

						Hence if there is a grey occurrence of $u$, we are done, so suppose $u$ only occurs colored in $C_1$.

						As $\sigma$ is the result of the $\mgu$ algorithm as defined in \ref{def:mgu_algo},
						there must be an occurrence of $u$ in the resolved literal, say w.l.o.g.\ at $l\at{\bhat u}$,
						such that $l'\at{\bhat u}$ is an abstraction of $u\sigma$ which is different from $u$ and as $l\sigma = l'\sigma$, $l'\at{\bhat u}$ is contained in a $\Gamma$-colored term.
						\begin{itemize}
							\item Suppose that $l'\at{\bhat u}$ contains the outermost symbol of $s$.
								Then it is a $\Delta$-term contained in a $\Gamma$-term, so by the induction hypothesis,
								$x_? \apath_{G_{C_1}} r$, where $r$ is the maximal colored term containing $l'\at{\bhat u}$.
								\mytodo{}

							\item Otherwise $l'\at{\bhat u}$ contains a variable $v$ such that $v\sigma$ contains $s$.

								same circumstances as $u$, only finitely often


						\end{itemize}
						%Either $u\sigma$ contains the outermost symbol of $s$, or it contains a variable $v$ such that $v\sigma$ contains the outermost symbol of $s$. But in the latter case, $v$ must occur elsewhere in $l'$, say at $l'\at{\bhat v}$, such that again $l\at{\bhat v}$ either contains the outermost symbol of $s$ or a variable $w$ such that $w\sigma$ contains the outermost symbol of $s$.
						%Since the $\mgu$ algorithm has terminated, we know that there

					\end{comment}

				\item Suppose a variable $u$ occurs in $C_1$ or $C_2$ such that $u\sigma$ contains a multi-colored $\Gamma$-term $t$.

					Then by Lemma~\ref{lemma:proof_along_mgu},
					a variable $u_n$ occurs in a resolved literal $l$ at $l\at{\bhat u_n}$ such that in the other resolved literal $l'$, $l'\at{\bhat u_n}$ contains the outermost symbol of $t$.

					If $l'\at{\bhat u_n}$ is a multi-colored $\Gamma$-term, then by the induction hypothesis, dots

					Otherwise as the outermost symbol of $t$ is $\Gamma$-colored, $l'\at{\bhat u_n}$ contains a $\Gamma$-colored term which contains a variable $v$ such that a $\Delta$-term occurs grey in $v\sigma$, where case~\ref{25_1} gives the result, or a multi-colored $\Gamma$-term $s$ occurs grey in $v$. But as $s$ is strictly smaller than $t$, this case can only repeat finitely often before the other case is reached.

			\end{enumerate}


		\item{}Factorisation.
			If the clause $C$ is the result of a factorisation of $C_1$, then
			\mytodo{}
			\qedhere
	\end{description}


\end{proof}







\clearpage

\section{Attempts}

\begin{clemma}
	\label{lemma:smallest_colored_container}
	Let a variable $x$ occur twice in $C$ such that in one occ, the smallest colored term containing $x$ is a $\Gamma$-term and for the other, the smallest colored term containing $x$ is a $\Delta$-term.
	Then $x$ occurs grey in $\AIany(C)$.
\end{clemma}
\begin{proof}
	\largered{missing: variables don't have to occur grey in $y\sigma$, e.g. in $\gamma\occ{y}$, $y\sigma$ might be $f(x)$ with $f$ $\Gamma$-colored.}
	~
	\begin{itemize}
		\item
			Suppose that in $C_i$, $\gamma\occ{x}$ occurs and in $C_j$, we have $\delta\occ{y}$ such that $x$ occurs grey in $y\sigma$.

			Then $y$ occurs in $l$ at $l\at{\bhat y}$ such that $l'\at{\bhat y}$ is an abstraction of a term containing a grey occurrence of $x$.

			Suppose that $l\at{\bhat y}$ (and therefore also $l\at{\bhat y}$) is not a grey occurrence as otherwise we are done. 

			As $l\sigma l'\sigma $, $l\at{\bhat y}$ and $l\at{\bhat y}$ share their prefix, so their color is the same.

			Then induction hypothesis.

		\item 
			Suppose that in $C_i$, $\gamma\occ{z}$ occurs and in $C_j$, $\delta\occ{y}$ occurs such that $x$ occurs grey in $y\sigma$ and in $z\sigma$.

			By Lemma~\ref{lemma:proof_along_mgu}, exists $y_1, \dots, y_n$ and $z_1, \dots z_m$ such that $x$ occurs grey in $y_i\sigma$ and in $z_i\sigma$ and term opposite of $y_n$ and $z_m$ actually contains $x$.


			If any $y_i$, $z_j$ occurs grey, done, so assume all occur colored.

			$z_m$ and $y_n$ opposite of actual $x$, as $x$ only in one clause, $z_m$ and $y_n$ in same clause. 
			they do share prefix with the occurrences of $x$ in the clause where $x$ is.

			if they there are contained in smallest col terms of opposite color $\Ra$ ind hyp

			otw of same smallest term color there.

			Note that every $y_i$, $z_j$ occurs at least twice: once as opposite var of the last one, once to unify with the next one.

			as originally different colors and at meeting point at $x$ same color, there has to be one alternation, where we use the ind hyp.


		\item
			Suppose that $\gamma\occ{x}$ in $C_i$ and $\delta\occ{x}$ in $z\sigma$ such that $z$ occurs grey in $C_j$.

			If $\delta\occ{x}$ occurs in $C_i$ (cannot occur in other clause), ind hyp.

			Suppose it does not occur. 
			Then however exists $\delta\occ{y}$ s.t. $x$ occurs grey in $y\sigma$ $\Ra$ other case.

		\item
			Suppose that $\gamma\occ{x}$ in $y\sigma$ such that $y$ occurs grey in $C_i$ and $\delta\occ{x}$ in $z\sigma$ such that $z$ occurs grey in $C_j$.

			If $\gamma\occ{x}$ and $\delta\occ{x}$ occur, ind hyp.

			If just one occurs, $\Ra$ other case.

			If none of them occur, then occur $\delta\occ{\alpha}$ s.t. $x$ grey in $\alpha\sigma$ and similar for $\gamma\occ{\beta}$ $\Ra$ other case.



	\end{itemize}
\end{proof}

\clearpage

\begin{clemma}
	Let $\sigma$ unifier.
	exists unification order $\sigma = \sigma_1 \dots \sigma_n$ with $\sigma_i =\nolinebreak \{ x_i \mapsto r_i \}$ s.t.\ 
	$x_i$ does not occur in $\{ r_i, r_{i+1}, \dots, r_n\}$.
\end{clemma}

\begin{proof}
	Suppose ordering does not exist, i.e.\ $l\sigma = l'\sigma$, but every $x_i$ occurs in some $r_j$ for $j\grq i$.

	But then last variable does not occur later..
\end{proof}

\begin{lemma}
	Let $\sigma$ unifier.

	At any stage in the run of the unification algo, exists var $x$ as one part of a difference pair s.t.\ $x$ does not occur in a function symbol in a difference pair.
\end{lemma}
\begin{proof}
	Suppose no such var exists. 


	{\tiny

		resolve all differences $x_i \sim r_i$ such that $r_i$ does not contain a variable in a function symbol.

		all variables, in particular the remaining $x_i$, occur in a function symbol in $r_j$ for some $j$.

		Iteratively resolve in some order: $x_i \mapsto r_i$, where every $r_i$ contains at least one variable.
		Hence as every $x_i$ occurs in some $r_j$, the variable in $r_i$ then occurs in $r_j$.

		so after a step, for the remaining difference pairs, it is still the case that every variable occurs in some $r_j$.

		We do not get an occurs check error as by assumptions, the term are unifiable.

		when we get to the point where there is only one subst left, it has to be of the form $x_i \mapsto r_i\occ{x_i}$, so we do get an occurs check error, which contradicts the assumptions that the terms are unifiable.

	}
\end{proof}

\begin{lemma}
	Let $\sigma$ unifier. 
	At any stage in the run of the unification algorithm, there exists a variable as one part of a difference pair such that the other part does not contain a variable, which also occurs as one part of a difference pair, under a function symbol.
\end{lemma}
\begin{proof}
	Suppose to the contrary, that \dots.

	Construct graph with vars as nodes and arrow from $x, y$ if exists difference pair $(x, r\occ{y})$ or the symmetric pair.

	As every variable unifies to a term containg another variable, we have that $\forall x \exists y\,E(x, y)$. Hence we can build a path of length $|V|+1$, but this contains a cycle. 

\end{proof}

{TODO ICI: does this mean that there is a variable which does not have a variable in a term at its RHS? }
(all difference pairs have a variable at some side, let's call it LHS and the other one RHS)

{possibly: do induction along this order: take subst which has no var to the right, then this one occurs in the term. next term then does not actually exists necessarily, so need to show some induction property.}


evil examples:

$P(z, z, \delta), \lnot P(f(x), f(y), y)$

$P(z, f(z), f(f(\delta))), \lnot P(f(x), y, y)$

$P(u, f(z), f(f(\delta))), \lnot P(f(x), y, y)$

\begin{figure}
	\begin{clemma}
		Suppose $\Gamma$-term $s(y)$ in original diff pairs.

		Suppose $y\sigma = x$ (simplification).

		Suppose no col change, i.e.\ no var $x$ occurs in a unified literal twice such that once in s.c.\ $\Gamma$-term and once in s.c.\ $\Delta$-term.

		Suppose no $x$ grey in $l\sigma \, ( = l'\sigma )$.

		Hence at some point have diff pair $(y, v)$ with $v\sigma = x$.

		by no col change and $s(y)$, $y$ does not occur in a s.c.\ $\Delta$-term.

		As no $x$ grey in $l\sigma$ and $y\sigma = x$, no $y$ grey.

		Hence $y$ only s.c.\ $\Gamma$-col.

		$y$ and $v$ same prefix, so $v$ s.c.\ $\Gamma$-col.

	\end{clemma}


\end{figure}

\begin{clemma}
	Let $\sigma = \mgu(l, l')$

	Suppose $\Gamma$-term $s\occ{y}$ in some unification pair, $\delta$ grey in $y\sigma$.

	Suppose no col change.

	Suppose no $\delta$ grey in $l\sigma \, ( = l'\sigma )$.

	Then exists $\Gamma$-term $h\occ{\delta'}$ in $l$ or $l'$ OR in earlier $\mgu$-operation.

\end{clemma}


~

\clearpage
\begin{clemma}
	Suppose s.c.\ $\Gamma$-term containing $\Delta$-term $\delta$ is created via unification of $l$ and $l'$.
	Then at least one of the following statements holds:
	\begin{enumerate}
		\item In $l\sigma$	(=$l'$), $\delta$ occurs grey.
		\item There is a variable $x$ in $l$ or $l'$ such that it occurs once in an s.c.\ $\Gamma$-term and once in an s.c.\ $\Delta$-term.
		\item A $\delta$-term occurs in a $\Gamma$-term in $l$ or $l'$ (\mytodo{ be more precise on which term}).
	\end{enumerate}
\end{clemma}
\begin{proof}
	We show that a term in question is created, then one of the statments holds, or a term in question has been created earlier during the run of the mgu.

	\begin{enumerate}
		\item
			Supp have $f(y)$ in some unification pair.

			Note $y$ not grey somewhere as otherwise done.

			At some stage exists diff pair $(y, t)$. note $y, t$ same prefix, hence same color.
			$t$ abstraction of $\epsilondelta$.

			\begin{itemize}
				\item supp $t$ contains outermost symbol of $\delta$. as $y, t$ same color, $t$ is multi-col term either in $l$ or $l'$, or created earlier during unification algo.
				\item otw $t$ contains var $v$ s.t.\ $v\sigma = \delta$ or $v\sigma = \epsilondelta$.

					Supp. $v$ occurs grey in $l$ or $l'$. then done. 

					Note during unification procedure, coloring does not disappear, hence assume now all $v$ colored.

					\hl{[ hole: col change ]}

					hence can assume all occs of $v$ are s.c.\ $\Gamma$-col.

					so have like $f(v)$, with $v\sigma = \delta$ or $v\sigma = \epsilondelta$.
					the corresponding diff pair is resolved earlier or later.

					possible argument: finitely often anyway? 

					possible argument: after finitely many variable renamings, we hit an actual term, which then is strictly smaller, hence terminates?

			\end{itemize}

		\item var substituted for multi-colored term .
	\end{enumerate}

\end{proof}

\clearpage
\begin{clemma}
	Let $\sigma = \mgu(l, l')$.
	Let $\gamma\occ{\delta}$ be a $\Gamma$-term containing a $\Delta$-term $\delta$ in $l\sigma$.
	Then one of the following statments holds:
	\begin{enumerate}
		\item $\delta$ occurs at a grey position in $l\sigma$ \mytodo{argue about occurring $l\sigma$}.
		\item col change (where?)
		\item in $l$ or $l'$, $\delta$ occurs in a $\Gamma$-term.
	\end{enumerate}
\end{clemma}
\begin{proof}
	Let $\sigma = \sigma_1 \cdots \sigma_n$, where $\sigma_i$ stems from the $i$th substitution applied by the unification algo.

	Let $l_j = l\sigma_1 \cdots \sigma_j$

	Let $\sigma_i$ be unifier $x \mapsto \delta$.

	Suppose $l_i $ contains a $\Delta$-term in a $\Gamma$-term, where the respective predecessor of the $\Gamma$-term does not have a $\Delta$-term at that position or does not exist in $l_{i-1}$.

	\begin{enumerate}
		\item
			Suppose a $\Gamma$-term $t\occ{y}$ exists in $l_{i-1}$, such that it contains a grey occ of a variable $y$ such that $y\sigma_i = \epsilondelta$  (where $\varepsilon$ may be ``empty'' or else some grey term).
			The corresponding difference pair is $(y, \epsilondelta)$, say at position $\bhat y$

			So $y$ occurs at say $\bhat y$ in $l$ or $l'$, say $\lambda$. ($y$ may occur in both, variable-disjointness might have already been broken).

			If it is a grey occurrence, we are done as $\delta$ occurs grey in $y\sigma$. 

			So assume $y$ occurs colored.

			$\lambda'_{i-1}\at{\bhat y} = \epsilondelta$.
			Note that $\lambda_{i-1}\at{\bhat y}$ and $\lambda'_{i-1}\at{\bhat y}$ agree on the prefix (by virtue of being a difference pair).

			\begin{itemize}
				\item
					Suppose $\lambda_{i-1}\at{\bhat y}$ occurs in an s.c.\ $\Gamma$-term.
					Then $\lambda'_{i-1}\at{\bhat y}$ is $\delta$ in a $\Gamma$-term in $l$ or $l'$ $\Ra$~IH.

				\item
					Suppose $\lambda_{i-1}\at{\bhat y}$ occurs in an s.c.\ $\Delta$-term.
					Then as $y$ occurs in $t$ in a $\Gamma$-term, we have a col change (but possibly distributed over $l$/$l'$).
					\mytodo{ lemma for col change }
			\end{itemize}

			, say
		\item
			Suppose $y$ at $\bhat y$ in $\lambda_{i-1}$ s.t.\ $y\sigma_i$ is a $\Gamma$-term containing a $\Delta$-term.

			Then $\lambda'_{i-1}\at{\bhat y}$ actually is that term $\Ra$ IH. 
	\end{enumerate}
\end{proof}

\begin{clemma}
	Let $\sigma = \mgu(l, l')$ such that in $l$ and $l'$, there are grey occs for col changes.
	Let $\gamma\occ{x}$ be a s.c.\ $\Gamma$-term containing a variable $x$ and $\delta\occ{x}$ be a s.c.\ $\Delta$-term containing the same variable $x$.
	Then $x$ occurs at a grey position.
\end{clemma}
\begin{proof}
	probably revisit later when pre-lemmas are done

\end{proof}

~

~



\section{Structure (cases) of relevant unifications} 

\begin{lemma}
	For a difference pair or a not necessarily prefix-disjoint ``unification pair'' $(s, t)$, $s$ and $t$ are both of same maximal and minimal color.
\end{lemma}

Supp $f(x)$ occurs somewhere (original diff pairs or somewhere during run of algo) and $x\sigma =\nolinebreak \varepsilon\occ{\delta}$.



\subsection{fst}

Then $f(x) \sim t$, s.t.\ $t\sigma = f(\varepsilon\occ{\delta})$.

(Suppose no col change.)

\begin{enumerate}
	\item Supp $t = f(\varepsilon\occ{\delta})$. \checkmark
	\item Supp $t = f(y)$.
		$y\sigma = \varepsilon\occ{\delta}$.
		Then IH (for some IH\dots).
	\item Supp $t = f_{1/2}(y)$.
		$y\sigma = f_{1/2}(\varepsilon\occ{\delta})$.
	\item Supp $t = y$.
		$y\sigma = f(\varepsilon\occ{\delta})$.
	\item ? Supp $h(t) = y$.
\end{enumerate}

\subsection{snd}

Then actually $x \sim t$, s.t.\ $t$ possibly non-proper abstraction of $\varepsilon\occ{\delta}$.

\begin{enumerate}
	\item Supp $t = \varepsilon\occ{\delta}$. \checkmark
	\item Supp $t = y$.
		$y\sigma = \varepsilon\occ{\delta}$.
\end{enumerate}

\subsection{random notes}

suppose $z\sim f(x)$.
then $x$ is only changed if $z$ is unified with something with an $f$-prefix.



\largeblue{ look at terms where partial unification applies. the final state is just an extremely advanced applied partial unification. }

\end{document}
