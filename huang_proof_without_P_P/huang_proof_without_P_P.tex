\documentclass[,%fontsize=11pt,%
	paper=a4,% 
	%landscape,
	%DIV12, % mehr text pro seite als defaultyyp
	DIV14, 
	%DIV=calc,%
	%twoside=false,%
	liststotoc,
	bibtotoc,
	draft=false,% final|draft % draft ist platzsparender (kein code, bilder..)
	%titlepage,
	numbers=noendperiod
]{scrartcl}

\usepackage{lscape}
\usepackage{stackengine}


\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}

\usepackage{enumerate}
\usepackage{paralist}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,backgrounds,graphs,%
	matrix,patterns,arrows,decorations.pathmorphing,decorations.pathreplacing,%
	positioning,fit,calc,decorations.text,shadows%
}


\input{../latex_header.tex}

% subsections also in toc
\setcounter{tocdepth}{2}

%\declaretheorem[title=Theorem,qed=$\triangle$,parent=chapter]{thm}
\newcommand{\thmqed}{$\square$} % for thms without proof
\newcommand{\propqed}{$\square$} % for props without proof
\declaretheorem[title=Theorem]{thm}
\declaretheorem[title=Proposition,sibling=thm]{prop}
%\declaretheorem[title=Lemma,parent=chapter]{lemma}
\declaretheorem[sibling=thm]{lemma}
\declaretheorem[title=Corollary,sibling=thm]{corr}
\declaretheorem[sibling=thm,title=Definition,style=definition,qed=$\triangle$]{defi}
%\declaretheorem[title=Definition,qed=$\triangle$,parent=chapter]{defi}
\declaretheorem[title=Example,style=definition,qed=$\triangle$,sibling=thm]{exa}

\declaretheorem[sibling=thm,title=Conjecture]{conj}

%\def\proofSkipAmount{ \vskip -0.5em}



%\usepackage{bussproof}

%\usepackage{vaucanson-g}
\usepackage{amssymb}
\usepackage{latexsym}

% for color-highlighted code
%\usepackage{color} % for grey comments
%\usepackage{alltt}

%\usepackage[doublespacing]{setspace}
\usepackage[onehalfspacing]{setspace}
%\usepackage[singlespacing]{setspace}
\usepackage{tabularx}
\usepackage{hyperref}
\usepackage{comment}
\usepackage{color}
\usepackage[final]{listings} % sourcecode in document
\usepackage{url}      % for urls
\usepackage{multicol}
\usepackage{float}
\usepackage{caption}
\usepackage{subfigure}
\usepackage{amsmath}
\usepackage{amssymb}

\usepackage{graphicx}

\usepackage[authoryear]{natbib} % \cite ; square|round etc.
%\usepackage[numbers,square]{natbib}
%\usepackage[square, authoryear]{natbib}
%\usepackage[language=english]{biblatex}

%\bibliographystyle{plain}
\bibliographystyle{alpha}
%\bibliographystyle{alphadin}
%\bibliographystyle{dinat}
%\bibliographystyle{chicago}
%\bibliographystyle{plainnat}

\bibdata{bib.bib}

\renewcommand*{\partformat}{\partname\ \thepart\ -}
\let\partheadmidvskip\

\newcommand{\comp}{\ensuremath{\text{comp}}}
% smaller url style
\makeatletter
\def\url@leostyle{%
\@ifundefined{selectfont}{\def\UrlFont{\sf}}{\def\UrlFont{\small\ttfamily}}}
\makeatother
\urlstyle{leo}

\newcommand{\myfig}[5] {
	\begin{figure}[tbph]
		\centering
		\includegraphics[#3]{#1}
		\caption[#4]{#5}
		\label{fig:#2}
	\end{figure}
}

\setlength{\parindent}{0em}
%\usepackage{thmtools} % actually already in latex_header.tex ...

\usepackage{amsthm}


\usepackage{tikz-qtree}

%\newcommand{\sig}[1]{{#1}_\Sigma}
%\newcommand{\p}[1]{{#1}_\Pi}
\newcommand{\sig}[1]{\stackrel{\Sigma}{#1}}
\newcommand{\p}[1]{\stackrel{\Pi}{#1}}

\newcommand{\e}[1]{\vskip .7em   \subsection*{#1}}


\def\proofSkipAmount{ \vskip -0.3em}

\newcommand{\lif}[1]{\lift{\Delta}{#1}{x}}
\newcommand{\lifboth}[1]{\lft{\Gamma\cup\Delta}{z}{#1}}

\begin{document}


\section{Attempt without $P_P$}


Intuition of $\sigma'$:

If we pull a substitution out of a lifting which replaced $\Delta$-terms, we also have to replace the $\Delta$-terms 
in the ``domain'' of the substitution. This is the lower case in the definition of $\sigma'$ below.

There is just a problem in the following case: $\lif{ f(x)\sigma }$, where $x\sigma = a$ and $f$ is a $\Delta$-symbol.
Then $\lif{ f(x)\sigma } = \lif{ f(a) } = x_i$, but $\lif{f(x)}\sigma = x_j$ with $i\neq j$.
The first case of the definition of $x_j$ then fixes this by replacing $x_j$ with $x_i$. 



\begin{lemma}
	\label{lemma:lif}

	Let $C$ be a clause and $t_1, \ldots, t_n$ the set of maximal $\Delta$-terms in $C$, $x_1, \ldots, x_n$ the corresponding fresh variables to replace the $t_i$, and $\sigma$ be a substitution.
	Let $\sigma'$ be defined such that
	\[
		z \sigma' =
		\begin{cases} 
			x_l & \text{ if } z = x_k \text{ and } t_k\sigma = t_l  \\
			\lif{z\sigma} & \text{ otherwise}
		\end{cases} 
	\]

	Note that the definition of $\sigma'$ only depends on the $x_i$ and $t_i$.

	Then
	$\lif{C\sigma} =
	\lif{C}\sigma'$.
\end{lemma}
\begin{proof}
	We prove this for an atom $P(s_1, \ldots, s_m)$ in $C$, which works since lifting and substitution commute over binary connectives and into an atom.

	We show that 
	$\lif{s_j \sigma} = \lif{s_j}\sigma'$ for $1 \leq j \leq m$.

	%Let $\phi \sigma^{t}$ denote $\phi[t/y]\sigma[t/x]$ for a fresh variable $y$.

	Note that anything in the term structure above a maximal $\Delta$-term is unaffected by both substitution and abstraction.

	Let $t_i$ be a maximal $\Delta$-term in $s_i \sigma$.

	We show that $ \lif{ t_i \sigma } = \lif{ t_i } \sigma'$, which proves the lemma.

	Let $t_i\sigma = t_j$. Then $\lif{ t_i\sigma} = \lif{t_j} = x_j$.

	We show that $x_j = \lif{t_i}\sigma'$.

	Suppose that $t_i = t_j$, i.e.\ $\sigma$ is trivial on $t_i$.
	Then $i=j$ as the $\Delta$-terms have a unique number.
	Hence $\lif{t_i}\sigma' = x_i \sigma' = x_i = x_j$.


	Otherwise $t_i \neq t_j$. Then $i\neq j$ and  $x_j \neq x_i$.\newline
	$\lif{t_i}\sigma' = x_i \sigma'$.
	By the definition of $\sigma'$, as $t_i\sigma = t_j$, $x_i\sigma' = x_j$.
	%
	%
	\begin{comment}
		Suppose no $\Delta$-colored symbol occurs in $s_j$ or $s_j\sigma$. Then $\lif{s_j\sigma} = s_j\sigma $. this equals $  s_j\sigma'$ as there, only the second case applies, where the lifting doesn't affect the term.

		Suppose a maximal $\Delta$-colored term $t_i$ occurs in $s_j\sigma$ but not in $s_j$ and suppose it's the only one in $s_j\sigma$.
		Then $\lif{ s_j\sigma } = \lif{ s_j\sigma^{t_i} }= s_j\sigma^{t_i} \abstraction{t_i/x_i} = \lif{s_j} \sigma^{t_i} \abstraction{t_i/x_i}$
	\end{comment}
	%Note that if a $\Delta$-term $t_i$ occurs in $s_j$, a $\Delta$-term with the same outermost symbol occurs in $s_j$ at the same position.
\end{proof}


\begin{comment}
	\begin{lemma}
	\label{lemma:lif_literal}
	If $l\sigma$ = $l'\sigma$, then $\lif{l}\sigma' = \lif{l'}\sigma'$ for $\sigma'$ defined as in lemma \ref{lemma:lif}
\end{lemma}
\begin{proof}
	$l\sigma$ = $l'\sigma$

	$\ra \lif{l\sigma} = \lif{l'\sigma}$

	by lemma \ref{lemma:lif}, 
	$\lif{l}\sigma' = \lif{l'}\sigma'$

\end{proof}



\begin{lemma} // currently unused

	$(\lif{C}(x_1, \ldots, x_n))\sigma =
	(\lif{C\sigma'}(x_1, \ldots, x_n))$ if $\sigma$ does not change any of $x_1, \ldots, x_n$ or any of $t_1, \ldots, t_n$.\qedhere

	\todo[inline]{it would work to fix substitutions of $x_i$ by substituting $t_i$ for that instead, as long as the result isn't another $t_i$, but this isn't actually relevant here.}

\end{lemma}

\begin{prop}
	$\Gamma = \lif{\Gamma}$.
\end{prop}
\begin{proof}
	By definition, $\Delta$-terms only appear in $\Delta$ and not in $\Gamma$. 
\end{proof}

\end{comment}

 
\begin{lemma}[currently 4.8 in thesis, Lemma 11 in Huang]
  \label{lemma:lift_commute}
  Let $A$ and $B$ be first-order formulas and $s$ and $t$ be terms. Then it holds that:
  \begin{enumerate}
    \item $\lift{\Phi}{\lnot A}{x} \semiff{} \lnot \lift{\Phi}{A}{x}$
    \item $\lift{\Phi}{A \circ B}{x} \semiff{} ( \lift{\Phi}{A}{x} \circ \lift{\Phi}{B}{x} )$ for  $\circ \in \{\land, \lor\}$
    \item $\lift{\Phi}{s = t}{x} \semiff{} ( \lift{\Phi}{s}{x} = \lift{\Phi}{t}{x} )$
  \end{enumerate}
\end{lemma}


\begin{lemma}
	$ \Gamma \entails \lif{(\PI(C) \lor C)} $.
	\label{lemma:gamma_entails_interpolant}
\end{lemma}

\begin{proof}
	By induction on the resolution refutation of the strengthening: $\Gamma \entails \PI(C) \lor C_\Gamma$

	Base case:
	Either $C \in \Gamma$, then it does not contain $\Delta$-terms.
	Otherwise $C \in \Delta$ and $\PI(C) = \top$.

	Induction step:
	\begin{description}
		\item{Resolution.}
			\begin{prooftree}
				\AxiomCm{C_1: D \lor l}
				\AxiomCm{C_2: E \lor \lnot l'}
				\RightLabelm{\quad l\sigma = l'\sigma}
				\BinaryInfCm{C: (D\lor E)\sigma}
			\end{prooftree}

			By the induction hypothesis, we can assume that:

			$\Gamma \entails \lif{\PI(C_1) \lor (D\lor l)_\Gamma}$ and $\Gamma \entails \lif{\PI(C_2) \lor (E\lor \lnot l')_\Gamma}$

			which by Lemma \ref{lemma:lift_commute} implies that

			$\Gamma \stackrel{(*)}\entails \lif{\PI(C_1)} \lor \lif{D_\Gamma} \lor \lif {l_\Gamma}$ and $\Gamma \stackrel{(\circ)}\entails \lif{\PI(C_2)} \lor \lif{E_\Gamma} \lor \lnot \lif{l'_\Gamma}$

					Let $\sigma'$ be defined as in Lemma \ref{lemma:lif} with $t_1, \ldots, t_n$ all $\Delta$-terms in this context, i.e.~from $C_1$, $C_2$, $\PI(C_1)$, $\PI(C_2)$ and $\sigma$.

			\begin{enumerate}
				\item $l$ is $\Gamma$-colored.
					Then $\PI(C) = [\PI(C_1) \lor \PI(C_2)]\sigma$. 

					We show that $\Gamma \entails \lif{ (\PI(C_1) \lor \PI(C_2))\sigma \lor (D \lor E)_\Gamma\sigma}$,
					\newline 
					i.e.~$\Gamma \entails \lif{ (\PI(C_1) \lor \PI(C_2) \lor D_\Gamma \lor E_\Gamma)\sigma} $.


					Hence by Lemma \ref{lemma:lif},
					$\Gamma \entails \lif{(\PI(C_1) \lor \PI(C_2) \lor D_\Gamma \lor E_\Gamma)}\sigma' $.

					Since $l\sigma = l'\sigma$ (by resolution rule application), $\lif{l\sigma} = \lif{l'\sigma}$.
					
					As by Lemma \ref{lemma:lif}, with $\sigma'$ as above, $\lif{l\sigma} = \lif{l}\sigma'$ and $\lif{l'\sigma} = \lif{l'}\sigma'$,
					we get $\lif{l}\sigma' = \lif{l'}\sigma'$. \label{aou5jklah}

					So by applying $\sigma'$ to $(*)$ and $(\circ)$, we can perform a resolution step on $\lif{l}\sigma'$ and get

					$\Gamma \entails \lif{\PI(C_1)}\sigma' \lor \lif{D_\Gamma} \sigma' \lor \lif{\PI(C_2)}\sigma' \lor \lif {E_\Gamma} \sigma'$.

					and consequently
				$\Gamma \entails \lif{ \PI(C_1) \lor \PI(C_2) \lor D_\Gamma \lor E_\Gamma}\sigma' $.

				So by Lemma \ref{lemma:lif},

				$\Gamma \entails \lif{ \Big(\PI(C_1) \lor \PI(C_2) \lor D_\Gamma \lor E_\Gamma \Big) \sigma } $.


				\item $l$ is $\Delta$-colored.
					Then $\PI(C) = (\PI(C_1) \land \PI(C_2))\sigma$. 

					We show that $\Gamma \entails \lif{(\PI(C_1) \land \PI(C_2))\sigma \lor (D_\Gamma \lor E_\Gamma)\sigma}$

					which by Lemma \ref{lemma:lift_commute} is equivalent to\newline
					$\Gamma \entails \Big(\lif{\PI(C_1)\sigma} \land \lif{\PI(C_2)\sigma}\Big) \lor \lif{D_\Gamma\sigma} \lor \lif{E_\Gamma\sigma}$

					and by Lemma \ref{lemma:lif} is equivalent to\newline
					$\Gamma \stackrel{(\times)}\entails \Big(\lif{\PI(C_1)}\sigma' \land \lif{\PI(C_2)}\sigma'\Big) \lor \lif{D_\Gamma}\sigma' \lor \lif{E_\Gamma}\sigma'$

					As $l$ and $l'$ are $\Delta$-colored, we can strengthen $(*)$ and $(\circ)$ as follows and apply $\sigma'$:

					$\Gamma \entails \lif{\PI(C_1)}\sigma' \lor \lif{D_\Gamma}\sigma' $ and $\Gamma \entails \lif{\PI(C_2)}\sigma' \lor \lif{E_\Gamma}\sigma'$

					These clearly imply $(\times)$.

				\item $l$ is grey. Then $\PI(C) = [(l \land \PI(C_2) ) \lor (\lnot l' \land \PI(C_2))]\sigma$.

					We show that $\Gamma \entails \lif{ [(l \land \PI(C_2) ) \lor (\lnot l' \land \PI(C_2))]\sigma \lor (D_\Gamma \lor E_\Gamma)\sigma}$, which by Lemma~\ref{lemma:lift_commute} and Lemma~\ref{lemma:lif} is equivalent to

					$\Gamma \entails \Big(\lif{l}\sigma' \land \lif{\PI(C_2)}\sigma'\Big)\lor\Big(\lnot \lif{l'}\sigma' \land \lif{\PI(C_2)}\sigma'\Big)\lor\lif{D_\Gamma}\sigma' \lor \lif{E_\Gamma}\sigma'$.

					Suppose for a model $M$ of $\Gamma$ that  $M \notentails \lif{D_\Gamma}\sigma'$ and $M\notentails \lif{E_\Gamma}\sigma'$ as otherwise we would be done.
					But then by $(*)$ and $(\circ)$,
					$M \entails \lif{\PI(C_1)}\sigma' \lor \lif{l}\sigma'$ and
					$M \entails \lif{\PI(C_2)}\sigma' \lor \lnot\lif{l'}\sigma'$.

					As observed in case \ref{aou5jklah}, $\lif{l}\sigma' = \lif{l'}\sigma'$. By a case distinction on the truth value of $\lif{l}\sigma'$, we obtain the result.



			\end{enumerate}

		\item{Factorisation.}
			\begin{prooftree}
				\AxiomCm{C_1: l \lor l' \lor D}
				\RightLabelm{\quad \sigma = \mgu(l, l')}
				\UnaryInfCm{C: (l \lor D)\sigma}
			\end{prooftree}

			Then $\PI(C) = \PI(C_1)\sigma$.

			The induction hypothesis gives that
			$\Gamma \entails \lif{\PI(C_1) \lor l \lor l' \lor D}$.
			Let $\sigma'$ be as in Lemma \ref{lemma:lif}.

			Then $\Gamma \entails \lif{\PI(C_1) \lor l \lor l' \lor D}\sigma'$ and by Lemma \ref{lemma:lif},
			$\Gamma \entails \lif{\PI(C_1)\sigma \lor l\sigma \lor l'\sigma \lor D\sigma}$.

			By Lemma \ref{lemma:lift_commute},
			$\Gamma \entails \lif{\PI(C_1)\sigma} \lor \lif{l\sigma} \lor \lif{l'\sigma} \lor \lif{D\sigma}$.

			As $\sigma = \mgu(l, l')$, $l\sigma$ and $l'\sigma$ are syntactically equal, hence $\lif{l\sigma} = \lif{l'\sigma}$.\todo[noline,size=\tiny]{syntactically equal? does ``equal'' suffice?. see also $s\sigma=r\sigma$ below}

			But then 
			$\Gamma \entails \lif{\PI(C_1)\sigma} \lor \lif{l\sigma} \lor \lif{D\sigma}$ and consequently by Lemma \ref{lemma:lif}, 
			$\Gamma \entails \lif{\PI(C_1)\sigma \lor l\sigma \lor D\sigma}$.



		\item{Paramodulation.}

			\begin{prooftree}
				\AxiomCm{C_1: D \lor s=t}
				\AxiomCm{C_2: E\occurat{r}{p}}
				\RightLabel{$\quad \sigma = \mgu(s, r)$}
				\BinaryInfCm{C: (D \lor E\occurat{t}{p})\sigma}
			\end{prooftree}

			By the induction hypothesis, we have:

			$\Gamma \entails \lif{\PI(C_1) \lor (D\lor s=t)_\Gamma}$

			$\Gamma \entails \lif{\PI(C_2) \lor (E\occurat{r}{p})_\Gamma}$

			By Lemma~\ref{lemma:lift_commute} and Lemma~\ref{lemma:lif}, these imply:

			$\Gamma \stackrel{\markA}\entails \lif{\PI(C_1)}\sigma' \lor \lif{D_\Gamma}\sigma' \lor \lif{s}\sigma' = \lif{t}\sigma'$

			$\Gamma \stackrel{\markB}\entails \lif{\PI(C_2)}\sigma' \lor \lif{(E\occurat{r}{p})_\Gamma}\sigma'$

			We distinguish two cases:\nopagebreak
			\begin{enumerate}
				\item Suppose $s$ does not occur in a maximal $\Delta$-term $h\occur{s}$ in $E\occurat{s}{p}$ which occurs more than once in $\PI(E(s)) \lor E\occurat{s}{p}$.

					We show that $\Gamma \entails \lif{ \Big((s=t \land \PI(C_2)) \lor (s\neq t \land \PI(C_1))\Big)\sigma \lor \Big((D \lor E\occurat{t}{p})_\Gamma\Big)\sigma}$, which subsumes the cases \ref{def:PI_paramod_2} and \ref{def:PI_paramod_3} of Definition \ref{def:PI_paramod}.
					By Lemma~\ref{lemma:lift_commute}, we can pull the liftings inwards and by Lemma~\ref{lemma:lif}, we can commute substitution and lifting by employing $\sigma'$ to arrive at

				$\Gamma \entails
				\Big((\lif{s}\sigma')=(\lif{t}\sigma') \land \lif{\PI(C_2)}\sigma'\Big) \lor
				\Big((\lif{s}\sigma')\neq(\lif{t}\sigma') \land \lif{\PI(C_1)}\sigma'\Big) \lor
				\Big(\lif{D_\Gamma}\sigma' \lor \lif{(E\occurat{t}{p})_\Gamma}\sigma'\Big)$

				Let $M$ be a model of $\Gamma$. Let $M \notentails \lif{D_\Gamma}\sigma' \lor \lif{(E\occurat{t}{p})_\Gamma}\sigma'$ as otherwise we would be done. We show that depending on the truth value of  $(\lif{s}) = (\lif{t})$ in $M$, either the first or second conjunct of the above formula holds.

				Suppose that $M \entails (\lif{s}) \neq (\lif{t})$. 
				Then $M \entails (\lif{s})\sigma' \neq (\lif{t})\sigma'$, so by~\markA, $M \entails \lif{\PI(C_1)}\sigma'$.

				On the other hand, suppose that $M \entails (\lif{s}) = (\lif{t})$.
				The following two lemmas show that $M \notentails \lif{E\occurat{r}{p}}\sigma'$, so by~\markB, we get that $M\entails \lif{\PI(C_2)}\sigma'$.
\bigskip

				\begin{lemma}
					\label{aga5tg5ba}
					$M \entails (\lif{s}) = (\lif{t})$ and $M\notentails \lif{E\occurat{t}{p}}\sigma'$ imply that $M\notentails \lif{E\occurat{s}{p}}\sigma'$.
				\end{lemma}
				\begin{proof} 
					$\lif{E\occurat{t}{p}}$ and $\lif{E\occurat{s}{p}}$ only differ at position $p$, where at the first, there is $\lif{t}$, and at the latter, there is $\lif{s}$. But in $M$, they are interpreted the same way, hence $M\entails \lif{E\occurat{t}{p}} \semiff \lif{E\occurat{s}{p}}$, which implies the result.
				\end{proof} 
\bigskip

				\begin{lemma}
					$\sigma=\mgu(s, r)$ and $M\notentails \lif{E\occurat{s}{p}}\sigma'$ imply that $M\notentails \lif{E\occurat{r}{p}}\sigma'$.
				\end{lemma}\nopagebreak 
				\begin{proof} 
					By Lemma \ref{lemma:lif}, $M\notentails \lif{(E\occurat{s}{p})\sigma}$. 

					%$\lif{(E\occurat{s}{p})\sigma}$ differs from $\lif{(E\occurat{r}{p})\sigma}$ exactly at $p$. 

					Due to $\sigma=\mgu(s, r)$, both $s\sigma$ and $r\sigma$ are syntactically equal.
%We also have that
% 					$M \entails (E\occurat{s}{p})\sigma \semiff{} (E\occurat{r}{p})\sigma$.
					Suppose they are both not $\Delta$-colored.
Then the lifting does not affect them and 
$\lif{(E\occurat{s}{p})\sigma} = \lif{(E\occurat{r}{p})\sigma}$.
Otherwise the lifting will replace them with the same variable and we as well get that
$\lif{(E\occurat{s}{p})\sigma} = \lif{(E\occurat{r}{p})\sigma}$.

By Lemma $\ref{lemma:lif}$, 
$\lif{(E\occurat{s}{p})}\sigma' = \lif{(E\occurat{r}{p})}\sigma'$, which implies the result.
				\end{proof} 




			\item Otherwise $s$ occurs in a maximal $\Delta$-term $h\occurat{s}{q}$ in $E\occurat{s}{p}$ which occurs more than once in $\PI(E(s)) \lor E\occurat{s}{p}$.


				\newenvironment{lemmaCustomNo}[1]
				{\renewcommand{\thelemma}{\ref{#1}$'$}%
					\addtocounter{lemma}{-1}%
				\begin{lemma}}
				{\end{lemma}}


				Then we have to replace Lemma \ref{aga5tg5ba} by:
				\begin{lemmaCustomNo}{aga5tg5ba}
					$M \entails (\lif{s}) = (\lif{t})$ and $M\notentails \lif{E\occurat{t}{p}}\sigma'$ imply that $M\notentails \lif{E\occurat{s}{p}}\sigma'$ or that $\lif{h\occurat{s}{q}} \neq \lif{h\occurat{t}{q}}$.
				\end{lemmaCustomNo}
				\begin{proof}
					If $\lif{E\occurat{t}{p}}$ and $\lif{E\occurat{s}{p}}$ differ only at position $p$, then the proof of Lemma \ref{aga5tg5ba} applies.
					
					Otherwise position $p$ is in a maximal $\Delta$-term $h\occurat{t}{q}$, such that $h\occurat{t}{q}$ and $h\occurat{s}{q}$ are replaced with distinct variables.
					But then clearly $\lif{h\occurat{s}{q}} \neq \lif{h\occurat{t}{q}}$.
				\end{proof}
 Hence the following holds:

				$\Gamma \entails
				\Big((\lif{s}\sigma')=(\lif{t}\sigma') \land \lif{\PI(C_2)}\sigma'\Big) \lor
				\Big((\lif{s}\sigma')\neq(\lif{t}\sigma') \land \lif{\PI(C_1)}\sigma'\Big) \lor
				\Big((\lif{s}\sigma')=(\lif{t}\sigma') \land (\lif{h\occurat{s}{q}}) \neq (\lif{h\occurat{t}{q}} )\Big) \lor
				\Big(\lif{D_\Gamma}\sigma' \lor \lif{(E\occurat{t}{p})_\Gamma}\sigma'\Big)$



		\end{enumerate}


		\clearpage

		\begin{comment}



			easy case:
			$\PI(C) = [ ( s=t \land \PI(C_2) ) \lor (s\neq t \land \PI(C_1)) ]\sigma$

			to show:
			$\Gamma \entails \lif{ [ (( s=t \land \PI(C_2) ) \lor (s\neq t \land \PI(C_1))) \lor (D \lor E[t]) ]\sigma} $

			proof idea: either $s=t$, then also $\PI(C_2)$, or else $s\neq t$, but then also $\PI(C_1)$

			by lemma \ref{lemma:lif} for $\sigma'$ as in lemma, 
			$\Gamma \entails \lif{ (( s=t \land \PI(C_2) ) \lor (s\neq t \land \PI(C_1))) \lor (D \lor E[t]) }\sigma' $

			by lemma 11 (huang)
			$\Gamma \entails [((\lif{s}=\lif{t} \land \lif{\PI(C_2)} ) \lor (\lif{s\neq t} \land \lif{\PI(C_1)})) \lor (\lif{D} \lor \lif{E[t]}) ]\sigma' $

			reformulate:
			$\Gamma \entails ((\lif{s}\sigma'=\lif{t}\sigma' \land \lif{\PI(C_2)}\sigma' ) \lor (\lif{s}\sigma'\neq \lif{t}\sigma' \land \lif{\PI(C_1)}\sigma')) \lor (\lif{D}\sigma' \lor \lif{E[t]}\sigma') $

			By the rule: $s\sigma = r\sigma$, hence also $\lif{s\sigma} = \lif{r\sigma}$ and $\lif{s}\sigma' = \lif{r}\sigma'$ REALLY TRUE? -- think so\dots

			Suppose $M \entails \Gamma$ and $M \not \entails (\lif{D}\sigma' \lor \lif{E[t]}\sigma') $.

			Suppose $M \entails \lif{s}\sigma' = \lif{t}\sigma'$.

			By induction hypothesis (and lemma 11 (huang) and adding the substitution $\sigma'$), 
			$\Gamma \entails \lif{\PI(C_2)}\sigma' \lor \lif{(E[r])}\sigma'$.

			However by assumption $\Gamma \not \entails \lif{E[t]}\sigma'$.

			Hence $\Gamma \not \entails \lif{E[s]}\sigma'$, and
			$\Gamma \not \entails \lif{E[r]}\sigma'$. Therefore $\Gamma \entails \lif{\PI(C_2)}\sigma'$.


			Suppose on the other hand $M \entails \lif{s}\sigma' \neq \lif{t}\sigma'$.

			By the induction hypothesis, 
			$M \entails \lif{\PI(C_1)}\sigma' \lor (\lif{D}\sigma'\lor (\lif{s}=\lif{t})\sigma')$,
			hence then $M \entails \lif{\PI(C_1)}\sigma'$.

			Consequently, 
			$M \entails (\lif{s}\sigma' \neq \lif{t}\sigma' \land \lif{\PI(C_1)}\sigma') \lor (\lif{s}\sigma' = \lif{t}\sigma' \land \lif{\PI(C_2)}\sigma')$.

			By lemma 11 (huang), 
			$M \entails \lif{s \neq {t} \land {\PI(C_1)} \lor ({s} = {t} \land \PI(C_2))}\sigma'$.

			Hence 
			$\Gamma \entails \lif{(s \neq {t} \land {\PI(C_1)} \lor ({s} = {t} \land \PI(C_2))}\sigma' \lor (\lif{D} \lor \lif{E[t]})\sigma') $.

			is this really what i need to show?
		\end{comment}

\end{description}
\end{proof}


General layout of this proof:

$ \Gamma \entails \lif{(\PI(C) \lor C)} $

Lemma 4.10: swap $\Gamma$ and $\Delta$ and obtain logical negationas interpolant <-- seems to go through

Corollary 4.11: $\Delta \entails \lifgamma{ \lnot \PI(C) \lor C}$ <-- just a corollary

Lemma 4.12: not important if lifting delta or gamma terms first <-- seems to go through

Thm 4.13: ordering <--- also?

\end{document}
