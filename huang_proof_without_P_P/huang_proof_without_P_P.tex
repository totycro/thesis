\documentclass[,%fontsize=11pt,%
	paper=a4,% 
	%landscape,
	%DIV12, % mehr text pro seite als defaultyyp
	DIV14, 
	%DIV=calc,%
	%twoside=false,%
	liststotoc,
	bibtotoc,
	draft=false,% final|draft % draft ist platzsparender (kein code, bilder..)
	%titlepage,
	numbers=noendperiod
]{scrartcl}

\usepackage{lscape}
\usepackage{stackengine}


\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}

\usepackage{enumerate}
\usepackage{paralist}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,backgrounds,graphs,%
	matrix,patterns,arrows,decorations.pathmorphing,decorations.pathreplacing,%
	positioning,fit,calc,decorations.text,shadows%
}


\input{../latex_header.tex}

% subsections also in toc
\setcounter{tocdepth}{2}

%\declaretheorem[title=Theorem,qed=$\triangle$,parent=chapter]{thm}
\newcommand{\thmqed}{$\square$} % for thms without proof
\newcommand{\propqed}{$\square$} % for props without proof
\declaretheorem[title=Theorem]{thm}
\declaretheorem[title=Proposition,sibling=thm]{prop}
%\declaretheorem[title=Lemma,parent=chapter]{lemma}
\declaretheorem[sibling=thm]{lemma}
\declaretheorem[title=Corollary,sibling=thm]{corr}
\declaretheorem[sibling=thm,title=Definition,style=definition,qed=$\triangle$]{defi}
%\declaretheorem[title=Definition,qed=$\triangle$,parent=chapter]{defi}
\declaretheorem[title=Example,style=definition,qed=$\triangle$,sibling=thm]{exa}

\declaretheorem[sibling=thm,title=Conjecture]{conj}

%\def\proofSkipAmount{ \vskip -0.5em}



%\usepackage{bussproof}

%\usepackage{vaucanson-g}
\usepackage{amssymb}
\usepackage{latexsym}

% for color-highlighted code
%\usepackage{color} % for grey comments
%\usepackage{alltt}

%\usepackage[doublespacing]{setspace}
\usepackage[onehalfspacing]{setspace}
%\usepackage[singlespacing]{setspace}
\usepackage{tabularx}
\usepackage{hyperref}
\usepackage{comment}
\usepackage{color}
\usepackage[final]{listings} % sourcecode in document
\usepackage{url}      % for urls
\usepackage{multicol}
\usepackage{float}
\usepackage{caption}
\usepackage{subfigure}
\usepackage{amsmath}
\usepackage{amssymb}

\usepackage{graphicx}

\usepackage[authoryear]{natbib} % \cite ; square|round etc.
%\usepackage[numbers,square]{natbib}
%\usepackage[square, authoryear]{natbib}
%\usepackage[language=english]{biblatex}

%\bibliographystyle{plain}
\bibliographystyle{alpha}
%\bibliographystyle{alphadin}
%\bibliographystyle{dinat}
%\bibliographystyle{chicago}
%\bibliographystyle{plainnat}

\bibdata{bib.bib}

\renewcommand*{\partformat}{\partname\ \thepart\ -}
\let\partheadmidvskip\

\newcommand{\comp}{\ensuremath{\text{comp}}}
% smaller url style
\makeatletter
\def\url@leostyle{%
\@ifundefined{selectfont}{\def\UrlFont{\sf}}{\def\UrlFont{\small\ttfamily}}}
\makeatother
\urlstyle{leo}

\newcommand{\myfig}[5] {
	\begin{figure}[tbph]
		\centering
		\includegraphics[#3]{#1}
		\caption[#4]{#5}
		\label{fig:#2}
	\end{figure}
}

\setlength{\parindent}{0em}
%\usepackage{thmtools} % actually already in latex_header.tex ...

\usepackage{amsthm}


\usepackage{tikz-qtree}

%\newcommand{\sig}[1]{{#1}_\Sigma}
%\newcommand{\p}[1]{{#1}_\Pi}
\newcommand{\sig}[1]{\stackrel{\Sigma}{#1}}
\newcommand{\p}[1]{\stackrel{\Pi}{#1}}

\newcommand{\e}[1]{\vskip .7em   \subsection*{#1}}

\def\proofSkipAmount{ \vskip -0.3em}

\begin{document}


	\section{Attempt without $P_P$}

	{
		\Huge

		current state:

		lemma \ref{lemma:overline} and \ref{lemma:overline_literal} seem to not work together. they would need some kind of common~$\sigma$

		~
	\bigskip
	~

	}


	\begin{defi}
		\label{def:overline}
		Overline as in paper, replace $\Delta$-terms $t_1, \ldots, t_n$ by respective fresh variables in parenthesis
	\end{defi}

	NOTE: variables are *not* replaced by overline.

	\begin{lemma}
		\label{lemma:overline}

		Let $t_1, \ldots, t_n$ be the maximal $\Delta$-terms in $C$.

		Let $\sigma'(x) =
		\begin{cases} 
			x_i & \text{ if } x = x_j \text{ for some $j$ and $t_j\sigma = t_i$}  \\
			\overline{x\sigma} & \text{ otherwise}
		\end{cases} $

		Then
		$(\overline{C\sigma}(x_1, \ldots, x_n)) =
		(\overline{C}(x_1, \ldots, x_n))\sigma'$.
	\end{lemma}
	\begin{proof}
		TODO

		// the first case handles the case where $\sigma$ replaces $x$ and $P(f(x)) \in C$ where $f$ is $\Delta$-colored.
	\end{proof}

	\begin{lemma}
		\label{lemma:overline_literal}
		If $l\sigma$ = $l'\sigma$, then $\overline{l}\sigma' = \overline{l'}\sigma'$ for $\sigma'$ defined as follows: TODO
	\end{lemma}
	\begin{proof}
		TODO
	\end{proof}

	\begin{lemma} // currently unused

		$(\overline{C}(x_1, \ldots, x_n))\sigma =
		(\overline{C\sigma'}(x_1, \ldots, x_n))$ if $\sigma$ does not change any of $x_1, \ldots, x_n$ or any of $t_1, \ldots, t_n$.\qedhere

		\todo[inline]{it would work to fix substitutions of $x_i$ by substituting $t_i$ for that instead, as long as the result isn't another $t_i$, but this isn't actually relevant here.}
		
	\end{lemma}

	\begin{prop}
		$\Gamma = \overline{\Gamma}(x_1, \ldots, x_n)$.
	\end{prop}
	\begin{proof}
		By definition, $\Delta$-terms only appear in $\Delta$ and not in $\Gamma$. 
	\end{proof}

	\begin{lemma} $ \Gamma \entails \overline{(\PI(C) \lor C)}(x_1, \ldots, x_n) $.
		\label{lemma:gamma_entails_interpolant}
	\end{lemma}

	\begin{proof}
	By induction on the resolution refutation.

	Base case:
	Either $C \in \Gamma$, then it does not contain $\Delta$-terms.
	Otherwise $C \in \Delta$ and $\PI(C) = \top$.

	Induction step:
	\begin{description}
		\item{Resolution.}
			\begin{prooftree}
				\AxiomCm{C_1: D \lor l}
				\AxiomCm{C_2: E \lor \lnot l'}
				\RightLabelm{\quad l\sigma = l'\sigma}
				\BinaryInfCm{C: (D\lor E)\sigma}
			\end{prooftree}

			By the induction hypothesis, we can assume that:

			$\Gamma \entails \overline{\PI(C_1) \lor (D\lor l)}(x_1, \ldots, x_n)$

			$\Gamma \entails \overline{\PI(C_2) \lor (E\lor \lnot l')}(x_{1}, \ldots, x_n)$

			\begin{enumerate}
				\item $\Pred(l) \in \Lang(\Gamma) \setminus \Lang(\Delta)$:
					Then $\PI(C) = [\PI(C_1) \lor \PI(C_2)]\sigma$. 

					We show that $\Gamma \entails \overline{ (\PI(C_1) \lor \PI(C_2))\sigma \lor (D \lor E)\sigma}(x_1, \ldots, x_n) $,
					\newline i.e.~$\Gamma \entails \overline{ (\PI(C_1) \lor \PI(C_2) \lor D \lor E)\sigma}(x_1, \ldots, x_n) $.
					This is by lemma \ref{lemma:overline} with $\sigma'$ as in the lemma equivalent to
					$\Gamma \entails \overline{(\PI(C_1) \lor \PI(C_2) \lor D \lor E)}(x_1, \ldots, x_n)\sigma' $.

					By Lemma 11 (Huang) and the induction hypothesis,

					$\Gamma \entails \overline{\PI(C_1)} \lor \overline{D} \lor \overline l$

					$\Gamma \entails \overline{\PI(C_2)} \lor \overline{E} \lor \lnot \overline{l'}$

					By lemma \ref{lemma:overline_literal} and since $l\sigma = l'\sigma$, $\overline{l}\sigma'' = \overline{l'}\sigma''$.

					Hence $\Gamma \entails (\overline{\PI(C_1)} \lor \overline{D} \lor \overline{\PI(C_2)} \lor \overline{E} )\sigma''$
					and again by Lemma 11 (Huang), 
					$\Gamma \entails \overline{\PI(C_1) \lor D \lor \PI(C_2) \lor E} \sigma''$.

					TODO: show that from this, it follows that: $\Gamma \entails \overline{ (\PI(C_1) \lor \PI(C_2))\sigma \lor (D \lor E)}(x_1, \ldots, x_n)\sigma' $,



				\item $\Pred(l) \in \Lang(\Delta) \setminus \Lang(\Gamma)$:
					Then $\PI(C) = [\PI(C_1) \land \PI(C_2)]\sigma$. 

					We show that $\Gamma \entails \overline{((\PI(C_1) \land \PI(C_2)) \lor D \lor E)\sigma}(x_1, \ldots, x_n) $.
					By lemma \ref{lemma:overline} with $\sigma'$ as in the lemma,
					$\Gamma \entails \overline{((\PI(C_1) \land \PI(C_2)) \lor D \lor E)}(x_1, \ldots, x_n) \sigma'$.

					TODO


			\end{enumerate}

		\item{Paramodulation.}

			\begin{prooftree}
				\AxiomCm{C_1: D \lor s=t}
				\AxiomCm{C_2: E[r]}
				\RightLabel{$\quad \sigma = \mgu(s, r)$}
				\BinaryInfCm{C: (D \lor E[t])\sigma}
			\end{prooftree}

			By the induction hypothesis, we have:

			$\Gamma \entails \overline{\PI(C_1) \lor (D\lor s=t)}$

			$\Gamma \entails \overline{\PI(C_2) \lor (E[r])}$



	easy case:
			$\PI(C) = [ ( s=t \land \PI(C_2) ) \lor (s\neq t \land \PI(C_1)) ]\sigma$

			to show:
			$\Gamma \entails \overline{ [ (( s=t \land \PI(C_2) ) \lor (s\neq t \land \PI(C_1))) \lor (D \lor E[t]) ]\sigma} $

			proof idea: either $s=t$, then also $\PI(C_2)$, or else $s\neq t$, but then also $\PI(C_1)$

			by lemma \ref{lemma:overline} for $\sigma'$ as in lemma, 
			$\Gamma \entails \overline{ (( s=t \land \PI(C_2) ) \lor (s\neq t \land \PI(C_1))) \lor (D \lor E[t]) }\sigma' $

			by lemma 11 (huang)
			$\Gamma \entails [((\overline{s}=\overline{t} \land \overline{\PI(C_2)} ) \lor (\overline{s\neq t} \land \overline{\PI(C_1)})) \lor (\overline{D} \lor \overline{E[t]}) ]\sigma' $

			reformulate:
			$\Gamma \entails ((\overline{s}\sigma'=\overline{t}\sigma' \land \overline{\PI(C_2)}\sigma' ) \lor (\overline{s}\sigma'\neq \overline{t}\sigma' \land \overline{\PI(C_1)}\sigma')) \lor (\overline{D}\sigma' \lor \overline{E[t]}\sigma') $

			By the rule: $s\sigma = r\sigma$, hence also $\overline{s\sigma} = \overline{r\sigma}$ and $\overline{s}\sigma' = \overline{r}\sigma'$ REALLY TRUE? -- think so\dots

			Suppose $M \entails \Gamma$ and $M \not \entails (\overline{D}\sigma' \lor \overline{E[t]}\sigma') $.

			Suppose $M \entails \overline{s}\sigma' = \overline{t}\sigma'$.

			By induction hypothesis (and lemma 11 (huang) and adding the substitution $\sigma'$), 
			$\Gamma \entails \overline{\PI(C_2)}\sigma' \lor \overline{(E[r])}\sigma'$.

		However by assumption $\Gamma \not \entails \overline{E[t]}\sigma'$.

		Hence $\Gamma \not \entails \overline{E[s]}\sigma'$, and
		$\Gamma \not \entails \overline{E[r]}\sigma'$. Therefore $\Gamma \entails \overline{\PI(C_2)}\sigma'$.


		Suppose on the other hand $M \entails \overline{s}\sigma' \neq \overline{t}\sigma'$.

		By the induction hypothesis, 
		$M \entails \overline{\PI(C_1)}\sigma' \lor (\overline{D}\sigma'\lor (\overline{s}=\overline{t})\sigma')$,
		hence then $M \entails \overline{\PI(C_1)}\sigma'$.

		Consequently, 
		$M \entails (\overline{s}\sigma' \neq \overline{t}\sigma' \land \overline{\PI(C_1)}\sigma') \lor (\overline{s}\sigma' = \overline{t}\sigma' \land \overline{\PI(C_2)}\sigma')$.

		By lemma 11 (huang), 
		$M \entails \overline{(s \neq {t} \land {\PI(C_1)} \lor ({s} = {t} \land \PI(C_2))}\sigma'$.

		Hence 
		$\Gamma \entails \overline{(s \neq {t} \land {\PI(C_1)} \lor ({s} = {t} \land \PI(C_2))}\sigma' \lor (\overline{D} \lor \overline{E[t]})\sigma') $.

		IS THIS REALLY WHAT I NEED TO SHOW?


\end{description}
\end{proof}


\end{document}
